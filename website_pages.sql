-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 71 -> 1__+MAX_llx_website_page__ - Aliases about --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(1__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'about', '', 'About us', 'About us', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-08 15:19:57', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<?php includeContainer(\'header\'); ?>__N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__        <main>__N____N__            <header class=\"site-header site-about-header\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N____N__                        <div class=\"col-lg-10 col-12 mx-auto\">__N__                            <h1 class=\"text-white\">About Us</h1>__N____N__                            <strong class=\"text-white\">Get to know us more</strong>__N__                        </div>__N____N__                    </div>__N__                </div>__N____N__                <div class=\"overlay\"></div>__N__            </header>           __N____N__            <section class=\"about section-padding\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N____N__                        <div class=\"col-12\">__N__                            <h2 class=\"mb-5\">Team Members</h2>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-12\">__N__                            <div class=\"team-thumb\">__N__                                <img src=\"image/Zai.tn/team/matthew-hamilton-tNCH0sKSZbA-unsplash.jpg\" class=\"img-fluid team-image\" alt=\"\">__N__                                __N__                                <div class=\"team-info\">__N__                                    <h4 class=\"mt-3 mb-0\">Sophia</h4>__N____N__                                    <p>CEO &amp; Founder</p>__N__                                </div>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-12 my-lg-0 my-4\">__N__                            <div class=\"team-thumb\">__N__                                <img src=\"image/Zai.tn/team/nicolas-horn-MTZTGvDsHFY-unsplash.jpg\" class=\"img-fluid team-image\" alt=\"\">__N____N__                                <h4 class=\"mt-3 mb-0\">Benjamin W.</h4>__N____N__                                <p>Restaurant Manager</p>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-12\">__N__                            <div class=\"team-thumb\">__N__                                <img src=\"image/Zai.tn/team/rc-cf-FMh5o5m5N9E-unsplash.jpg\" class=\"img-fluid team-image\" alt=\"\">__N__                                __N__                                <h4 class=\"mt-3 mb-0\">Muchen Jack</h4>__N____N__                                <p>Senior Chef</p>__N__                            </div>__N__                        </div>__N____N__                    </div>__N__                </div>__N__            </section>__N__            __N__        </main>__N____N__</section>__N____N____N__<?php includeContainer(\'footer\'); ?>__N____N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 181 -> 2__+MAX_llx_website_page__ - Aliases acompte --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(2__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'acompte', '', 'acompte', '', '', '', '', '1', '2024-08-06 15:57:43', '2024-08-06 15:57:50', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $datec = isset($_GET[\'datec\']) ? $_GET[\'datec\'] : \'\';__N__    $date_lim_reglement = isset($_GET[\'date_lim_reglement\']) ? $_GET[\'date_lim_reglement\'] : \'\';__N____N__    // Requête SQL pour obtenir la somme totale des total_ht des factures de la société connectée__N__    $query_total_ht = \"SELECT SUM(total_ht) AS total_ht_sum FROM \" . MAIN_DB_PREFIX . \"facture WHERE fk_soc = \" . intval($societe_id) . \" AND ref LIKE \'AC%\'\";__N__    $result_total_ht = $db->query($query_total_ht);__N__    $total_ht_sum = 0;__N____N__    if ($result_total_ht) {__N__        $row_total_ht = $db->fetch_object($result_total_ht);__N__        if ($row_total_ht) {__N__            $total_ht_sum = $row_total_ht->total_ht_sum;__N__        }__N__    }__N____N__    // Requête SQL initiale pour récupérer les factures et les montants payés__N__    $sql = \"SELECT f.rowid AS facture_id, f.ref, f.datec, f.date_lim_reglement, f.total_ht, f.total_tva, f.total_ttc, f.multicurrency_total_ttc, f.fk_statut,f.type,f.paye, __N__                   (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__            FROM \" . MAIN_DB_PREFIX . \"facture f__N__            WHERE f.fk_soc = \" . intval($societe_id) . \" AND f.ref LIKE \'AC%\'\";__N__            __N__    // Ajouter les critères de recherche selon les paramètres fournis__N__    if (!empty($ref)) {__N__        $sql .= \" AND f.ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N__    if (!empty($datec)) {__N__        $sql .= \" AND f.datec = \'\" . $db->escape($datec) . \"\'\";__N__    }__N__    if (!empty($date_lim_reglement)) {__N__        $sql .= \" AND f.date_lim_reglement = \'\" . $db->escape($date_lim_reglement) . \"\'\";__N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__$link_to_page = dol_buildpath(\'Detailsfacture.php\', 1);__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE FACTURE</th>__N__                            <th>DATE facturation</th>__N__                            <th>Date échéance</th>__N__                            <th>mode de réglement</th>__N__                            <th>MONTANT HT</th>__N__                            <th>MONTANT TVA</th>__N__                            <th>MONTANT TTC</th>__N__                            <th>reçu</th>__N__                            <th>créance</th>__N__                            <th>STATUT</th>__N__                            <th>Action</th>__N__                            <th></th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        // Initialisation des totaux__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N__                        $total_recu_sum = 0;__N__                        $total_creance_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                // Calcul de la créance__N__                                $creance = $row->total_ttc - $row->total_amount_recu;__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N__                                $total_recu_sum += $row->total_amount_recu;__N__                                $total_creance_sum += $creance;__N____N__                                echo \"<tr>\";__N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->date_lim_reglement)) . \"</td>\";__N__                                echo \"<td></td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_amount_recu, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($creance, 3, \',\', \' \') . \" TND</td>\";__N____N__                                // Affichage du statut en fonction de la valeur de fk_statut__N__                                if ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0) {__N__                                    echo \"<td>Commencée</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 2) {__N__                                    echo \"<td>Remboursé ou converti</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 3) {__N__                                    echo \"<td>Payée </td>\";__N__                                } else {__N__                                    echo \"<td>Autre</td>\"; // Gérer les autres cas si nécessaire__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page . \'?facture_id=\' . $row->facture_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'12\'>Aucune Facture trouvée</td></tr>\"; // Modifié pour correspondre au nombre de colonnes__N__                        }__N__                        ?>__N__                    </tbody>__N__                    __N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 72 -> 3__+MAX_llx_website_page__ - Aliases ajoutcommande --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(3__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'ajoutcommande', '', 'ajoutcommande', 'ajoutcommande', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-30 14:51:57', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N__session_start();__N____N__// Vérifier si l\'utilisateur est connecté__N__if (!isset($_SESSION[\'valid\'])) {__N__    header(\"Location: Login.php\");__N__    exit;__N__}__N____N__// Récupérer l\'ID de l\'utilisateur connecté et l\'ID de la société__N__$user_id = (int)$_SESSION[\'id\']; // Assurez-vous que l\'ID de l\'utilisateur est entier__N____N__// Afficher l\'ID de la société__N__echo \"<p>ID de la société : $user_id</p>\";__N____N__// Récupérer product_id depuis l\'URL__N__$product_id = isset($_GET[\'product_id\']) ? (int)$_GET[\'product_id\'] : 0;__N____N__// Vérifier si product_id est valide (à adapter selon vos besoins)__N__if ($product_id <= 0) {__N__    die(\"Erreur : ID de produit non spécifié ou invalide.\");__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__// Vérifier la connexion à la base de données__N__if (!$db) {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__// Fonction pour générer un ref unique__N__function generateUniqueRef($db) {__N__    $base_ref = \'prov\';__N__    $new_ref = \'\';__N__    $tries = 0;__N____N__    do {__N__        // Générer une nouvelle référence__N__        $new_ref = $base_ref . uniqid();__N__        __N__        // Vérifier si la référence existe déjà__N__        $query_check_ref = \"SELECT COUNT(*) as count FROM \" . MAIN_DB_PREFIX . \"commande WHERE ref = \'$new_ref\'\";__N__        $result_check_ref = $db->query($query_check_ref);__N__        $count = $db->fetch_object($result_check_ref)->count;__N__        __N__        // Limiter le nombre d\'essais pour éviter une boucle infinie__N__        $tries++;__N__        if ($tries > 10) {__N__            // En cas d\'échec après 10 tentatives, générer une référence aléatoire unique__N__            $new_ref = $base_ref . uniqid();__N__            break;__N__        }__N__    } while ($count > 0);__N____N__    return $new_ref;__N__}__N____N__// Vérifier si le formulaire a été soumis__N__if (isset($_POST[\'submit\'])) {__N__    // Échapper la date du champ de formulaire de manière sécurisée__N__    $date = $db->escape($_POST[\'date\']);__N____N__    // Vérifier si la société existe dans la base de données__N__    $query_check_soc = \"SELECT rowid FROM \" . MAIN_DB_PREFIX . \"societe WHERE rowid = $user_id\";__N__    $result_check_soc = $db->query($query_check_soc);__N__    $num_rows = $db->num_rows($result_check_soc);__N____N__    if ($num_rows > 0) {__N__        // Générer un ref unique__N__        $ref = generateUniqueRef($db);__N____N__        // Calculer le total TTC de la commande__N__        $total_ttc = 0;__N__        if (isset($_SESSION[\'panier\'][$user_id]) && count($_SESSION[\'panier\'][$user_id]) > 0) {__N__            foreach ($_SESSION[\'panier\'][$user_id] as $item) {__N__                $total_ttc += $item[\'prix\'] * $item[\'quantite\'];__N__            }__N__        }__N____N__        // Préparation de la requête SQL pour l\'insertion de commande__N__        $query_insert_commande = \"INSERT INTO \" . MAIN_DB_PREFIX . \"commande (ref, date_commande, fk_soc, fk_statut, total_ht) __N__                                  VALUES (\'$ref\', \'$date\', $user_id, 1, $total_ttc)\";__N__        $result_insert = $db->query($query_insert_commande);__N____N__        // Vérification si la requête a réussi__N__        if ($result_insert) {__N__            // Récupérer l\'ID de la commande insérée__N__            $commande_id = $db->last_insert_id(MAIN_DB_PREFIX . \'commande\');__N____N__            // Insertion des lignes de commande__N__            if (isset($_SESSION[\'panier\'][$user_id]) && count($_SESSION[\'panier\'][$user_id]) > 0) {__N__                foreach ($_SESSION[\'panier\'][$user_id] as $item) {__N__                    // Échapper les valeurs pour éviter les injections SQL__N__                    $fk_product = (int)$item[\'id\'];__N__                    $qty = (int)$item[\'quantite\'];__N__                    $prix_unitaire = (float)$item[\'prix\'];__N__                    __N__                    $query_insert_commande_line = \"INSERT INTO \" . MAIN_DB_PREFIX . \"commandedet (fk_commande, fk_product, qty, subprice) __N__                                                   VALUES ($commande_id, $fk_product, $qty, $prix_unitaire)\";__N__                    $result_insert_line = $db->query($query_insert_commande_line);__N__                    if (!$result_insert_line) {__N__                        echo \"<p>Erreur lors de l\'ajout de la ligne de commande : \" . $db->lasterror() . \"</p>\";__N__                    }__N__                }__N__                // Redirection vers la page commandes.php après l\'ajout de la commande__N__                header(\"Location: Commandes.php\");__N__                exit;__N__            } else {__N__                echo \"<p>Aucun produit trouvé dans le panier pour l\'utilisateur.</p>\";__N__            }__N__        } else {__N__            echo \"<p>Erreur lors de l\'ajout de la commande : \" . $db->lasterror() . \"</p>\";__N__        }__N__    } else {__N__        echo \"<p>Erreur : La société avec l\'ID $user_id n\'existe pas.</p>\";__N__    }__N__}__N__?>__N____N__<!DOCTYPE html>__N__<html lang=\"fr\">__N__<body>__N__    <div class=\"zai-container\">__N__        <?php include(\'header.php\'); ?>__N__        <main class=\"zai-main\">__N__            <h1>Ajouter Commande</h1>__N__            <!-- Affichage de l\'ID du produit -->__N__            <p>ID du produit sélectionné : <?php echo $product_id; ?></p>__N__            __N__            <form action=\"\" method=\"post\">__N__                <div class=\"form-group\">__N__                    <label for=\"date\">Date</label>__N__                    <input type=\"date\" name=\"date\" id=\"date\" autocomplete=\"off\" value=\"<?php echo date(\'Y-m-d\'); ?>\" readonly>__N__                </div>__N____N__                <!-- Affichage du produit sélectionné -->__N__                <?php __N__                // Vérifier si le produit spécifié est présent dans le panier__N__                $found = false;__N__                if (isset($_SESSION[\'panier\'][$user_id]) && count($_SESSION[\'panier\'][$user_id]) > 0) {__N__                    foreach ($_SESSION[\'panier\'][$user_id] as $item) {__N__                        if ($item[\'id\'] == $product_id) {__N__                            $found = true;__N__                            ?>__N__                            <div class=\"form-group\">__N__                                <label>Référence: <?php echo $item[\'ref\']; ?></label>__N__                            </div>__N__                            <div class=\"form-group\">__N__                                <label>Label: <?php echo $item[\'label\']; ?></label>__N__                            </div>__N__                            <div class=\"form-group\">__N__                                <label>Prix: <?php echo $item[\'prix\']; ?> TND</label>__N__                            </div>__N__                            <div class=\"form-group\">__N__                                <label>Quantité: <?php echo $item[\'quantite\']; ?></label>__N__                            </div>__N__                            <?php__N__                            break; // Sortir de la boucle une fois trouvé__N__                        }__N__                    }__N__                }__N__                if (!$found) {__N__                    echo \"<p>Le produit spécifié n\'est pas dans le panier.</p>\";__N__                }__N__                ?>__N____N__                <div class=\"login-btn\">__N__                    <input type=\"submit\" name=\"submit\" value=\"Ajouter Commande\">__N__                </div>__N__            </form>__N__        </main>__N__    </div>__N__</body>__N__</html>', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 73 -> 4__+MAX_llx_website_page__ - Aliases aside_bar --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(4__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'aside_bar', '', 'aside_bar', '', '', '', '', '1', '2024-07-18 11:22:54', '2024-08-07 12:48:26', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<?php __N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__// Démarrer la session__N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__/**__N__ * Récupère le nombre total de tickets pour une société donnée.__N__ *__N__ * @param object $db L\'objet de connexion à la base de données.__N__ * @param int $societe_id L\'ID de la société.__N__ * @return int Le nombre total de tickets.__N__ */__N__function getTotalTickets($db, $societe_id) {__N__    $total_count_ticket = 0;__N____N__    $query_total_tickets = \"SELECT COUNT(*) AS total_count_ticket FROM \" . MAIN_DB_PREFIX . \"ticket WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_tickets = $db->query($query_total_tickets);__N____N__    if ($result_total_tickets && $db->num_rows($result_total_tickets) > 0) {__N__        $row_total_tickets = $db->fetch_object($result_total_tickets);__N__        $total_count_ticket = $row_total_tickets->total_count_ticket;__N__    }__N____N__    return $total_count_ticket;__N__}__N____N__// Vérifier la connexion à la base de données__N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Utiliser la fonction pour récupérer le nombre total de tickets__N__    $total_count_ticket = getTotalTickets($db, $societe_id);__N__}__N____N__?>__N____N____N__<div class=\"container-profil-grid\">__N____N__<aside contenteditable=\"true\">__N__    __N__    <div class=\"aside-cate-container\">__N__        __N__        <a class=\"aside-cate<?php echo ($websitepage->ref == \'profil\' ? \' active-link\' : \'\'); ?>\" href=\"profil.php\"><i class=\'bx bxs-user\'></i><p class=\"cate-link\">Mon profil</p></a>__N__        <a class=\"aside-cate<?php echo ($websitepage->ref == \'proposition_commerciale\' ? \' active-link\' : \'\'); ?>\" href=\"proposition_commerciale.php\"><i class=\'bx bx-money-withdraw\'></i><p class=\"cate-link\">Devis</p></a>__N__        <a class=\"aside-cate<?php echo ($websitepage->ref == \'commandes\' ? \' active-link\' : \'\'); ?>\" href=\"commandes.php\"><i class=\'bx bx-cart-alt\' ></i><p class=\"cate-link\">Commandes</p></a>__N__        <a class=\"aside-cate<?php echo ($websitepage->ref == \'facture\' ? \' active-link\' : \'\'); ?>\" href=\"facture.php\"><i class=\'bx bx-receipt\' ></i><p class=\"cate-link\">Factures</p></a>__N__        <a class=\"aside-cate<?php echo ($websitepage->ref == \'ticket\' ? \' active-link\' : \'\'); ?>\" href=\"ticket.php\"><i class=\'bx bx-support\'></i><p class=\"cate-link\">Tickets <span class=\"nbr-tickets\"><?php echo number_format($total_count_ticket); ?></span></p></a>__N__        <!--<a class=\"aside-cate<?php echo ($websitepage->ref == \'ticket\' ? \' active-link\' : \'\'); ?>\" href=\"ticket.php\"><i class=\'bx bx-archive-in\' ></i><p class=\"cate-link\">Tickets</p></a>-->__N__    </div>__N__</aside>__N____N__<?php if($total_count_ticket < 10) : ?>__N__    <style>__N__        .nbr-tickets {__N__            color: var(--color-first);__N__            padding: 1px 8px;__N__            margin-left: 4px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 1px;__N__            background: var(--color-second);__N__        }__N__        .active-link .nbr-tickets {__N__            color: var(--color-third);__N__            padding: 1px 8px;__N__            margin-left: 0px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 0px;__N__            background: transparent;__N__        }__N__    </style>__N__<?php elseif($total_count_ticket < 100) : ?>__N__    <style>__N__        .nbr-tickets {__N__            color: var(--color-first);__N__            padding: 4px 4px;__N__            margin-left: 4px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 1px;__N__            background: var(--color-second);__N__        }__N__        .active-link .nbr-tickets {__N__            color: var(--color-third);__N__            padding: 5px 5px;__N__            margin-left: 0px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 0px;__N__            background: transparent;__N__        }__N__    </style>__N__<?php elseif($total_count_ticket > 99) : ?>__N__    <style>__N__        .nbr-tickets {__N__            color: var(--color-first);__N__            padding: 8px 3px;__N__            margin-left: 4px;__N__            font-size: 19px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 1px;__N__            background: var(--color-second);__N__        }__N__        .active-link .nbr-tickets {__N__            color: var(--color-third);__N__            padding: 8px 3px;__N__            margin-left: 0px;__N__            font-size: 19px;__N__            border-radius: 50%;__N__            position: relative;__N__            top: 0px;__N__            background: transparent;__N__        }__N__    </style>__N__<?php endif; ?>__N____N____N____N____N____N____N__<style>__N__    aside {__N__        position: relative;__N__        background: var(--color-first);__N__        width: 14vw;__N__        height: 100%;__N__        padding: 34px 10px 34px 22px;__N__    }__N__    __N__    .aside-cate-container {__N__        display: flex;__N__        flex-direction: column;__N__        align-items: flex-start;__N__        gap: 38px;__N__        width: 100%;__N__    }__N____N__    .aside-cate {__N__        position: relative;__N__        width: 100%;__N__        display: flex;__N__        align-items: center;__N__        gap: 10px;__N__    }__N__    __N__    .aside-cate i {__N__        color: var(--color-second);__N__        font-size:  28px;__N__    }__N__    __N__    .aside-cate.active-link i {__N__        color: var(--color-third);__N__    }__N__    __N__    .cate-link {__N__        position: relative;__N__        width: 100%;__N__        text-align: left;__N__        font-family: \"Roboto\", sans-serif !important;__N__        font-size: 22px !important;__N__        color: var(--color-second) !important;__N__        letter-spacing: 1px;__N__        font-weight: 500 !important;__N__        margin: 0 !important;__N__    }__N__    __N__    .active-link {__N__        background: var(--color-second);__N__        padding: 10px 16px 10px 20px;__N__        border-radius: 14px 0 0 14px;__N__        width: 108%;__N__    }__N__    .active-link .cate-link {__N__        color: var(--color-third) !important;__N__    }__N__    __N__    __N__    __N__</style>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 182 -> 5__+MAX_llx_website_page__ - Aliases avoir --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(5__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'avoir', '', 'avoir', '', '', '', '', '1', '2024-08-06 15:58:07', '2024-08-06 15:58:11', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $datec = isset($_GET[\'datec\']) ? $_GET[\'datec\'] : \'\';__N__    $date_lim_reglement = isset($_GET[\'date_lim_reglement\']) ? $_GET[\'date_lim_reglement\'] : \'\';__N____N__    // Requête SQL pour obtenir la somme totale des total_ht des factures de la société connectée__N__    $query_total_ht = \"SELECT SUM(total_ht) AS total_ht_sum FROM \" . MAIN_DB_PREFIX . \"facture WHERE fk_soc = \" . intval($societe_id) . \" AND ref LIKE \'AC%\'\";__N__    $result_total_ht = $db->query($query_total_ht);__N__    $total_ht_sum = 0;__N____N__    if ($result_total_ht) {__N__        $row_total_ht = $db->fetch_object($result_total_ht);__N__        if ($row_total_ht) {__N__            $total_ht_sum = $row_total_ht->total_ht_sum;__N__        }__N__    }__N____N__    // Requête SQL initiale pour récupérer les factures et les montants payés__N__    $sql = \"SELECT f.rowid AS facture_id, f.ref, f.datec, f.date_lim_reglement, f.total_ht, f.total_tva, f.total_ttc, f.multicurrency_total_ttc, f.fk_statut,f.type,f.paye, __N__                   (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__            FROM \" . MAIN_DB_PREFIX . \"facture f__N__            WHERE f.fk_soc = \" . intval($societe_id) . \" AND f.ref LIKE \'AV%\'\";__N__            __N__    // Ajouter les critères de recherche selon les paramètres fournis__N__    if (!empty($ref)) {__N__        $sql .= \" AND f.ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N__    if (!empty($datec)) {__N__        $sql .= \" AND f.datec = \'\" . $db->escape($datec) . \"\'\";__N__    }__N__    if (!empty($date_lim_reglement)) {__N__        $sql .= \" AND f.date_lim_reglement = \'\" . $db->escape($date_lim_reglement) . \"\'\";__N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__$link_to_page = dol_buildpath(\'Detailsfacture.php\', 1);__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE FACTURE</th>__N__                            <th>DATE facturation</th>__N__                            <th>Date échéance</th>__N__                            <th>mode de réglement</th>__N__                            <th>MONTANT HT</th>__N__                            <th>MONTANT TVA</th>__N__                            <th>MONTANT TTC</th>__N__                            <th>reçu</th>__N__                            <th>créance</th>__N__                            <th>STATUT</th>__N__                            <th>Action</th>__N__                            <th></th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        // Initialisation des totaux__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N__                        $total_recu_sum = 0;__N__                        $total_creance_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                // Calcul de la créance__N__                                $creance = $row->total_ttc - $row->total_amount_recu;__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N__                                $total_recu_sum += $row->total_amount_recu;__N__                                $total_creance_sum += $creance;__N____N__                                echo \"<tr>\";__N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->date_lim_reglement)) . \"</td>\";__N__                                echo \"<td></td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_amount_recu, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($creance, 3, \',\', \' \') . \" TND</td>\";__N____N__                                // Affichage du statut en fonction de la valeur de fk_statut__N__                                if ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0) {__N__                                    echo \"<td>Commencée</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 2) {__N__                                    echo \"<td>Remboursé ou converti</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 3) {__N__                                    echo \"<td>Payée </td>\";__N__                                } else {__N__                                    echo \"<td>Autre</td>\"; // Gérer les autres cas si nécessaire__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page . \'?facture_id=\' . $row->facture_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'12\'>Aucune Facture trouvée</td></tr>\"; // Modifié pour correspondre au nombre de colonnes__N__                        }__N__                        ?>__N__                    </tbody>__N__                  __N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 74 -> 6__+MAX_llx_website_page__ - Aliases catalogue --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(6__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'catalogue', '', 'catalogue', '', '', '', '', '1', '2024-07-29 19:53:13', '2024-08-05 12:39:54', null, '', 'page', '', '<?php __N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N__?>__N____N__<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<div class=\"head-content<?php echo ($websitepage->ref == \'catalogue\' || $websitepage->ref == \'index\' ? \' head-abso\' : \'\'); ?>\" >__N____N__    <?php includeContainer(\'header\'); __N__    __N__    $link_to_page = dol_buildpath(\'Panier.php\', 1);__N__    __N__    ?>__N__</div>__N____N__<style>__N__    .head-content {__N__    position: relative;__N__    top: 0;__N__    width: 100%;__N__    z-index: 100;__N__    }__N____N__    .head-abso {__N__    position: absolute !important;__N__    }__N__    __N__    __N__    .landing-hero {__N__        position: relative;__N__        width: 100%;__N__        height: 80vh;__N__        background: linear-gradient(0deg, rgb(139, 152, 167) 0%, rgba(38, 60, 92, 1) 100%);__N__    }__N__    __N__    .hero-grid-container {__N__        position: relative;__N__        height:90vh;__N__        display: grid;__N__        grid-template-columns: 1fr 1fr;__N__        align-content: center;__N__        margin: 0 5% ;__N__        justify-items: center;__N__    }__N__    __N__    .LEFT-SIDE {__N__        display: flex ;__N__        flex-direction: column;__N__        align-items: flex-start;__N__        justify-content: center;__N__        gap: 50px;__N__    }__N__    __N__    .LEFT-SIDE h1 {__N__        font-family: \"JetBrains Mono\", monospace;__N__        font-size: 78px;  __N__        color: var(--color-second);__N__        text-transform: uppercase;__N__        letter-spacing: 4px;__N__    }__N__    __N__    .LEFT-SIDE h1 span {__N__        color: var(--color-first); __N__    }__N__    __N__    __N__    .LEFT-SIDE button  {__N__        position: relative;__N__        display: flex;__N__        color: var(--color-first);__N__        background: var(--color-second);__N__        border: solid 1px var(--color-first);__N__        border-radius: 16px;__N__        padding: 5px 6px;__N__        align-items: center;__N__        font-size: 32px;__N__        text-transform: uppercase;__N__        font-family: \"Roboto\", sans-serif;__N__        font-weight: 800;__N__        letter-spacing: 1px;__N__        gap: 8px;__N__        margin-left: 10px;__N__    }__N__    __N__    .LEFT-SIDE button span {__N__        background: var(--color-first);__N__        color: var(--color-second);__N__        padding: 12px 24px;__N__        border-radius: 13px;__N__        transition: .4s;__N__        z-index: 2;__N__    }__N__    __N__    .LEFT-SIDE button:hover span{__N__        transform: translateX(83px);__N__    }__N__    __N__    .LEFT-SIDE button:hover .btn-none {__N__         opacity: .9;__N__    }__N____N__    .btn-none {__N__        position: absolute;__N__        position: absolute;__N__        font-size: 54px;__N__        left: 19px;__N__        z-index: 1;__N__        opacity: 0;__N__        transition: .4s;__N__    }__N__    __N__    __N__    .RIGHT-SIDE img{__N__        width: 90%;__N__    }__N__    .RIGHT-SIDE{__N__        display: flex;__N__        justify-content: flex-end;__N__    }__N__    __N__    __N__    .scroll-down {__N__        position:absolute;__N__        bottom: -2vh;__N__        width: 65PX;__N__        height: 210px;__N__        right: -45px;__N__    }__N__    __N__    .first-color {__N__        color: var(--color-first);__N__    }__N__    __N__    __N__    __N__    __N__    __N__    __N__    __N__    .title-sec {__N__        font-family: \"JetBrains Mono\", monospace;__N__        color: var(--color-third);__N__        text-transform: uppercase;__N__        letter-spacing: 2px;__N__        margin-bottom: 6vh !important;__N__        text-align: center;__N__    }__N__    __N__    __N__    .container-product-shop  {__N__        display: flex;__N__        justify-content: center;__N__        flex-wrap: wrap;__N__        gap: 56px;__N__    }__N__    __N__    .card-product {__N__        position: relative;__N__        background: #ffffff;__N__        display: flex;__N__        width: 400px;__N__        height:auto;__N__        flex-direction: column;__N__        padding: 8px;__N__        border: solid 1px var(--color-first);__N__        border-radius: 24px;__N__        box-shadow: 0 3px 6px rgb(0 0 0 / 25%);__N__        gap: 18px;__N__        transition: .3s;__N__        will-change: transform; /* cancel the noise effect */__N____N__    }__N__    __N__    .card-product:hover {__N__        transform: scale(104%) translateY(-10px);__N__        box-shadow: 0 8px 10px rgb(0 0 0 / 20%);__N__    }__N__    __N__    .card-product .container-card-image {__N__        position: relative;__N__        overflow: hidden;__N__        aspect-ratio: 1 / 1;__N__        width: 100%;__N__        height:270px;__N__        border-radius: 16px;__N__        margin-bottom: 12px;__N__    }__N__    __N__    .container-card-image img {__N__        object-fit: cover;__N__        width: 100%;__N__        object-position: center;__N__        height: 100%;__N__    }__N__    __N__    .container-card-details{__N__        margin-left: 3px;__N__    }__N__    .container-card-details  p{__N__        font-family: \"Roboto\", sans-serif !important;__N__        font-size: 26px;__N__        font-weight: 500;__N__        color: var(--color-third);__N__        letter-spacing: 1px;__N__    }__N__    __N__    .name-product {__N__        margin: 0 !important;__N__    }__N__    .price-product {__N__        margin-bottom: 4px !important;__N__    }__N__    __N__    __N__    .line-sep {__N__        position: relative;__N__        left: -11px;__N__        width: 40%;__N__        height: 1px;__N__        background: var(--color-first);__N__        margin: 3.5% 0;__N__    }__N__    __N__    .sala {__N__        position: absolute;__N__        bottom: 10px;__N__        right: 10px;__N__    }__N__     __N__    .circle-deco {__N__        width: 40px;__N__        height: 40px;__N__        background: var(--color-first);__N__        z-index: 2;__N__        border: none;__N__        color: #ffffff;__N__        border-radius: 50% !important;__N__        font-weight: 900;__N__        font-size: 25px !important;__N__        display: flex;__N__        padding-bottom: 2px !important;__N__        justify-content: center;__N__        will-change: transform;__N__        transition: .2s;__N__    }__N__    __N__    .circle-deco:hover {__N__        transform: scale(120%) rotate(90deg);__N__    }__N__    __N__    __N__    __N__    __N__    __N__</style>__N____N____N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__        <main>__N__            <section class=\"landing-hero\">__N__                <div class=\"hero-grid-container\">__N__                    <div class=\"LEFT-SIDE\">__N__                        <h1>Decouvrez <br><span>nos</span> <br>produits</h1>__N__                        <a href=\"catalogue#produit-section\">__N__                        <button>__N__                            <span>Decouvrir</span>__N__                            <i class=\'btn-none bx bx-x\' ></i>__N__                            <lord-icon__N__                            src=\"https://cdn.lordicon.com/whtfgdfm.json\"__N__                            trigger=\"loop\"__N__                            delay=\"1000\"__N__                            state=\"hover-ternd-flat-6\"__N__                            colors=\"primary:#263c5c\"__N__                            style=\"width: 70px; margin-right: 6px; height: 62px;\"__N__                            </lord-icon> __N__                        </button>__N__                        </a>__N__                    </div>__N__                    <div class=\"RIGHT-SIDE\">__N__                        <img  src=\"image/__WEBSITE_KEY__/sapiens1.png\" alt=\"WORK\"/>__N__                    </div>__N__                </div>__N__            </section>__N____N____N____N____N____N__            <section class=\"menu section-padding\" id=\"produit-section\" style=\"background: var(--color-second); padding-bottom: 16vh;\">__N__                <div class=\"container-section\" style=\"margin: 0 6%;\">__N__                    <h2 class=\"title-sec\"><span class=\"first-color\">Nos</span> produits </h2>__N__                    __N__                    <div class=\"container-product-shop\">__N__  __N__                        __N__                            __N__                        <?php __N__                            global $db;__N__                            __N__                            // Requête SQL pour obtenir tous les produits__N__                            $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"product\";__N__                            $result = $db->query($sql);__N__                        ?>__N__                        __N__                        <?php if($result) : ?>__N__                        __N__                            <!-- Boucle pour afficher chaque produit-->__N__                            __N__                            <?php while ($row = $db->fetch_object($result)) : ?>__N__                    __N__                            __N__                                    <div class=\"card-product\">__N__                                    <a href=\"<?php echo htmlspecialchars(\'product_page.php?product_id=\' . $row->rowid); ?>\">__N__                                        <div class=\"container-card-image\">__N__                                            <!--IMAGE DOIT ETRE DYNAMIC-->__N__                                            <img src=\"image/__WEBSITE_KEY__/logiciel_caisse_magasin.jpg\" alt=\"Produit\"/>__N__                                        </div>__N__                                        <div class=\"container-card-details\">__N__                                            <p class=\"name-product\"><?php echo htmlspecialchars($row->label); ?></p>__N__                                            <div class=\"line-sep\"></div>__N__                                            <p class=\"price-product\"><?php echo number_format($row->price, 3, \',\', \'\'); ?> TND</p>__N__                                        </div>__N__                                        <a class=\"sala\" href=\"<?php echo htmlspecialchars($link_to_page . \'?product_id=\' . $row->rowid); ?>\"><button class=\"circle-deco\">+</button></a>__N__                                    </a>__N__                                    </div>__N__                        __N__                            <?php endwhile; ?>__N__                            __N__                            <!--PAS DE PRODUIT DANS LA DB-->__N__                            <?php else : ?>__N__                            __N__                                <div class=\'col-12\'>__N__                                    <p>Aucun produit trouvé.</p>__N__                                </div>__N__                                __N__                        <?php endif; ?>__N____N____N____N__                        __N__                    </div>__N__                </div>__N__            </section>__N__        </main>__N____N__</section>__N____N____N__<?php includeContainer(\'footer\'); ?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 75 -> 7__+MAX_llx_website_page__ - Aliases commandes --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(7__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'commandes', '', 'commandes', 'commandes', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-07 18:15:25', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $filter_statut = isset($_GET[\'filter-statut\']) ? $_GET[\'filter-statut\'] : \'\'; // Filtre statut__N____N__    $sql = \"SELECT rowid AS commande_id, ref, date_commande, total_ht, total_ttc, total_tva, date_cloture, fk_statut, facture__N__            FROM \" . MAIN_DB_PREFIX . \"commande __N__            WHERE fk_soc = \" . intval($societe_id) . \" AND fk_statut != 0\";__N____N__    // Ajout de la condition de recherche par référence si elle est définie__N__    if (!empty($ref)) {__N__        $sql .= \" AND ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N____N__    // Ajout des conditions de filtre de statut__N__    if (!empty($filter_statut)) {__N__        if ($filter_statut == \'1\') {__N__            $sql .= \" AND fk_statut = 1\";__N__        } elseif ($filter_statut == \'2\') {__N__            $sql .= \" AND fk_statut = 2\";__N__        } elseif ($filter_statut == \'3\') {__N__            $sql .= \" AND fk_statut = 3 AND facture = 0\";__N__        } elseif ($filter_statut == \'4\') {__N__            $sql .= \" AND fk_statut = 3 AND facture = 1\";__N__        }__N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N__$link_to_page_imp = dol_buildpath(\'detailscommande.php\', 1);__N__$link_to_page = dol_buildpath(\'commandes.php\', 1);__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE COMMANDE</th>__N__                            <th>DATE</th>__N__                            <th>MONTANT HT</th>__N__                            <th>MONTANT TVA</th>__N__                            <th>MONTANT TTC</th>__N__                            <th>DATE DE LIVRAISON</th>__N__                            __N__                            <style>__N__                                .filter-statut {__N__                                    position: absolute;__N__                                    top: 0;__N__                                    width: 100%;__N__                                    height: 80%;__N__                                    left: 10px;__N__                                    font-size: 14px;__N__                                }__N__                                __N__                                #filter-statut {__N__                                    opacity: 0;__N__                                    height: 100%;__N__                                    width: 100%;__N__                                    padding: 10px;__N__                                    cursor: pointer;__N__                                }__N__                                __N__                                .box-filter {__N__                                    display: flex;__N__                                    justify-content: center;__N__                                    align-items: center;__N__                                }__N__                                __N__                            </style>__N__                            __N__                            <th style=\"position: relative;\">__N__                                <div class=\"filter-statut\">__N__                                    <form action=\"<?php echo htmlspecialchars($link_to_page); ?>\" method=\"get\">__N__                                        <input type=\"hidden\" name=\"website\" value=\"ebusinessTester1\">__N__                                        <input type=\"hidden\" name=\"pageref\" value=\"commandes\">__N__                                        <label></label>__N__                                        <select name=\"filter-statut\" id=\"filter-statut\" onchange=\"this.form.submit()\">__N__                                            <option value=\"\" <?php if ($filter_statut == \'\') echo \'selected\'; ?>>Tout</option>__N__                                            <option value=\"1\" <?php if ($filter_statut == \'1\') echo \'selected\'; ?>>Validée</option>__N__                                            <option value=\"2\" <?php if ($filter_statut == \'2\') echo \'selected\'; ?>>Envoi en cours</option>__N__                                            <option value=\"3\" <?php if ($filter_statut == \'3\') echo \'selected\'; ?>>Livrée</option>__N__                                            <option value=\"4\" <?php if ($filter_statut == \'4\') echo \'selected\'; ?>>Livrée-Facturé</option>__N__                                        </select>__N__                                    </form>__N__                                </div>__N__                                <span class=\"box-filter\">__N__                                    STATUT<i class=\'bx bx-filter\' style=\"margin-left: 4px;\"></i>__N__                                </span>__N__                            </th>__N__                            __N__                            <th>Action</th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                echo \"<tr>\";__N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->date_commande)) . \"</td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \"</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N____N__                                // Afficher la date de clôture seulement si elle n\'est pas NULL__N__                                echo \"<td>\" . ($row->date_cloture ? date(\"d/m/Y\", strtotime($row->date_cloture)) : \'\') . \"</td>\";__N____N__                                // Statut__N__                                if ($row->fk_statut == 1) {__N__                                    echo \"<td>Validée</td>\";__N__                                } elseif ($row->fk_statut == 2) {__N__                                    echo \"<td>Envoi en cours</td>\";__N__                                } elseif ($row->fk_statut == 3 && $row->facture == 0) {__N__                                    echo \"<td>Livrée</td>\";__N__                                } elseif ($row->fk_statut == 3 && $row->facture == 1) {__N__                                    echo \"<td>Livrée-Facturé</td>\"; __N__                                } else {__N__                                    echo \"<td>Autre</td>\";__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page_imp . \'?commande_id=\' . $row->commande_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'8\'>Aucune commande trouvée</td></tr>\";__N__                        }__N__                        ?>__N__                    </tbody>__N__                    <tfoot>__N__                        <tr>__N__                            <td colspan=\"2\"><strong>Total</strong></td>__N__                            <td><strong><?php echo number_format($total_ht_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_tva_sum, 3, \',\', \' \'); ?></strong></td>__N__                            <td><strong><?php echo number_format($total_ttc_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td colspan=\"4\"></td>__N__                        </tr>__N__                    </tfoot>__N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 76 -> 8__+MAX_llx_website_page__ - Aliases contact --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(8__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'contact', '', 'Contact us', 'Contact us', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-08 15:19:57', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<?php __N__if (GETPOST(\'action\') == \'sendmail\')    {__N__    include_once DOL_DOCUMENT_ROOT.\'/core/class/CMailFile.class.php\';__N__    $from = GETPOST(\'email\', \'alpha\');__N__    $to = $mysoc->email;__N__    $message = GETPOST(\'message\', \'alpha\');__N__    $cmail = new CMailFile(\'Contact from website\', $to, $from, $message);__N__    if ($cmail->sendfile()) {__N__        ?>__N__        <script>__N__            alert(\"Message sent successfully !\");__N__        </script>__N__        <?php__N__	} else {__N__		echo $langs->trans(\"ErrorFailedToSendMail\", $from, $to).\'. \'.$cmail->error;__N__	}__N__}__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N____N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__            <header class=\"site-header site-contact-header\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N__                        <div class=\"col-lg-10 col-12 mx-auto\">__N__                            <h1 class=\"text-white\">Say Hi</h1>__N____N__                            <strong class=\"text-white\"__N__                                >We are happy to get in touch with you</strong__N__                            >__N__                        </div>__N__                    </div>__N__                </div>__N____N__                <div class=\"overlay\"></div>__N__            </header>__N____N__            <a id=\"reservation\"></a><br>__N__            __N__            <section class=\"contact section-padding\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N__                        <div class=\"col-12\">__N__                            <h2 class=\"mb-4\">Leave a message</h2>__N__                        </div>__N____N__                        <div class=\"col-lg-6 col-12\">__N__                            <form__N__                                class=\"custom-form contact-form row\"__N__                                action=\"#\"__N__                                method=\"post\"__N__                                role=\"form\"__N__                            >__N__                                <input type=\"hidden\" name=\"action\" value=\"sendmail\">__N__                                <input type=\"hidden\" name=\"token\" value=\"<?php echo newToken(); ?>\">__N__                                __N__                                <div class=\"col-lg-6 col-6\">__N__                                    <label for=\"contact-name\" class=\"form-label\"__N__                                        >Full Name</label__N__                                    >__N____N__                                    <input__N__                                        type=\"text\"__N__                                        name=\"contact-name\"__N__                                        id=\"contact-name\"__N__                                        class=\"form-control\"__N__                                        placeholder=\"Your Name\"__N__                                        required__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-6\">__N__                                    <label__N__                                        for=\"contact-phone\"__N__                                        class=\"form-label\"__N__                                        ><?php echo $weblangs->trans(\"Phone\"); ?></label__N__                                    >__N____N__                                    <input__N__                                        type=\"telephone\"__N__                                        name=\"contact-phone\"__N__                                        id=\"contact-phone\"__N__                                        class=\"form-control\"__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-12\">__N__                                    <label__N__                                        for=\"contact-email\"__N__                                        class=\"form-label\"__N__                                        ><?php echo $weblangs->trans(\"Email\"); ?></label__N__                                    >__N____N__                                    <input__N__                                        type=\"email\"__N__                                        name=\"contact-email\"__N__                                        id=\"contact-email\"__N__                                        pattern=\"[^ @]*@[^ @]*\"__N__                                        class=\"form-control\"__N__                                        placeholder=\"Your Email\"__N__                                        required=\"\"__N__                                    />__N____N__                                    <label__N__                                        for=\"contact-message\"__N__                                        class=\"form-label\"__N__                                        ><?php echo $weblangs->trans(\"Message\"); ?></label__N__                                    >__N____N__                                    <textarea__N__                                        class=\"form-control\"__N__                                        rows=\"5\"__N__                                        id=\"contact-message\"__N__                                        name=\"contact-message\"__N__                                        placeholder=\"Your Message\"__N__                                    ></textarea>__N__                                </div>__N____N__                                <div class=\"col-lg-5 col-12 ms-auto\">__N__                                    <button type=\"submit\" class=\"form-control\">__N__                                        <?php echo $weblangs->trans(\"Send\"); ?>__N__                                    </button>__N__                                </div>__N__                            </form>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-12 mx-auto mt-lg-5 mt-4\">__N__                            <h5>Weekdays</h5>__N____N__                            <div class=\" mb-lg-3\">__N__                                 <?php $days = [\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\"];__N__                                   foreach ($days as $day){__N__                            echo \"<p> $day : \" .getDolGlobalString(\"MAIN_INFO_OPENINGHOURS_$day\")  .\"</p>\";    __N__                        }__N__                        ?>__N__                            </div>__N____N__                            <h5>Weekends</h5>__N____N__                            <div class=\"d-flex\">__N__                                <p>Saturday and Sunday</p>__N____N__                                <p class=\"ms-5\">to be determined !</p>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-12\" id=\"divaddress\">__N__                            <br><br>__N__                        __N__                            <h4 class=\"mt-5 mb-4 center\">__N__                                <?php echo $mysoc->getFullAddress() ?>__N__                            </h4>__N____N__                            <!-- Google MAPS -->__N__                            <center><div class=\"mapouter\"><div class=\"gmap_canvas\"><iframe width=\"600\" height=\"500\" id=\"gmap_canvas\" src=\"https://maps.google.com/maps?q=<?php echo urlencode($mysoc->getFullAddress()); ?>&t=&z=13&ie=UTF8&iwloc=&output=embed\" frameborder=\"0\" scrolling=\"no\" marginheight=\"0\" marginwidth=\"0\"></iframe>__N__                            </div>__N__                            <style>.mapouter{text-align:right;height:500px;width:600px;}.gmap_canvas {overflow:hidden;background:none!important;height:500px;width:600px;}</style>__N__                            </div></center>__N__                        </div>__N__                    </div>__N__                </div>__N__            </section>__N__        </main>__N____N____N__        __N__        <!-- Modal -->__N__        <div__N__            class=\"modal fade\"__N__            id=\"BookingModal\"__N__            tabindex=\"-1\"__N__            aria-labelledby=\"BookingModal\"__N__            aria-hidden=\"true\"__N__        >__N__            <div class=\"modal-dialog modal-dialog-centered modal-xl\">__N__                <div class=\"modal-content\">__N__                    <div class=\"modal-header\">__N__                        <h3 class=\"mb-0\">Reserve a table</h3>__N____N__                        <button__N__                            type=\"button\"__N__                            class=\"btn-close\"__N__                            data-bs-dismiss=\"modal\"__N__                            aria-label=\"Close\"__N__                        ></button>__N__                    </div>__N____N__                    <div__N__                        class=\"modal-body d-flex flex-column justify-content-center\"__N__                    >__N__                        <div class=\"booking\">__N__                            <form__N__                                class=\"booking-form row\"__N__                                role=\"form\"__N__                                action=\"contact.php\"__N__                                method=\"POST\"__N__                            >__N__                                <input type=\"hidden\" name=\"token\" value=\"<?php echo newToken(); ?>\" />__N__                                <input type=\"hidden\" name=\"action\" value=\"sendmail\">__N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"name\" class=\"form-label\"__N__                                        >Full Name</label__N__                                    >__N____N__                                    <input__N__                                        type=\"text\"__N__                                        name=\"name\"__N__                                        id=\"name\"__N__                                        class=\"form-control\"__N__                                        placeholder=\"Your Name\"__N__                                        required__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"email\" class=\"form-label\"__N__                                        >Email Address</label__N__                                    >__N____N__                                    <input__N__                                        type=\"email\"__N__                                        name=\"email\"__N__                                        id=\"email\"__N__                                        pattern=\"[^ @]*@[^ @]*\"__N__                                        class=\"form-control\"__N__                                        placeholder=\"your@email.com\"__N__                                        required__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"phone\" class=\"form-label\"__N__                                        >Phone Number</label__N__                                    >__N____N__                                    <input__N__                                        type=\"telephone\"__N__                                        name=\"phone\"__N__                                        id=\"phone\"__N__                                        class=\"form-control\"__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"people\" class=\"form-label\"__N__                                        >Number of persons</label__N__                                    >__N____N__                                    <input__N__                                        type=\"text\"__N__                                        name=\"people\"__N__                                        id=\"people\"__N__                                        class=\"form-control\"__N__                                        placeholder=\"12 persons\"__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"date\" class=\"form-label\"__N__                                        >Date</label__N__                                    >__N____N__                                    <input__N__                                        type=\"date\"__N__                                        name=\"date\"__N__                                        id=\"date\"__N__                                        value=\"\"__N__                                        class=\"form-control\"__N__                                    />__N__                                </div>__N____N__                                <div class=\"col-lg-6 col-12\">__N__                                    <label for=\"time\" class=\"form-label\"__N__                                        >Time</label__N__                                    >__N____N__                                    <select__N__                                        class=\"form-select form-control\"__N__                                        name=\"time\"__N__                                        id=\"time\"__N__                                    >__N__                                        <option value=\"5\" selected>__N__                                            5:00 PM__N__                                        </option>__N__                                        <option value=\"6\">6:00 PM</option>__N__                                        <option value=\"7\">7:00 PM</option>__N__                                        <option value=\"8\">8:00 PM</option>__N__                                        <option value=\"9\">9:00 PM</option>__N__                                    </select>__N__                                </div>__N____N__                                <div class=\"col-12\">__N__                                    <label for=\"message\" class=\"form-label\"__N__                                        >Special Request</label__N__                                    >__N____N__                                    <textarea__N__                                        class=\"form-control\"__N__                                        rows=\"4\"__N__                                        id=\"message\"__N__                                        name=\"message\"__N__                                        placeholder=\"\"__N__                                    ></textarea>__N__                                </div>__N____N__                                <div class=\"col-lg-4 col-12 ms-auto\">__N__                                    <button type=\"submit\" class=\"form-control\">__N__                                        Submit Request__N__                                    </button>__N__                                </div>__N__                            </form>__N__                        </div>__N__                    </div>__N____N__                    <div class=\"modal-footer\"></div>__N__                </div>__N__            </div>__N__        </div>__N____N__</section>__N____N____N__<?php includeContainer(\'footer\'); ?>__N____N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 77 -> 9__+MAX_llx_website_page__ - Aliases detailscommande --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(9__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'detailscommande', '', 'detailscommande', '', '', '', '', '1', '2024-07-24 13:32:43', '2024-07-24 15:32:51', null, '', 'page', '', '<?php__N__// Inclure les fichiers nécessaires et démarrer la session__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__require_once $main_inc_path;__N____N__session_start();__N____N__// Vérifier la connexion de l\'utilisateur__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if (!$db) {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__// Récupérer et nettoyer l\'ID de commande à partir de l\'URL__N__$commande_id = intval($_GET[\'commande_id\']);__N____N__// Récupérer les informations de la commande depuis la base de données__N__$sql_check_commande = \"SELECT rowid, ref FROM \" . MAIN_DB_PREFIX . \"commande WHERE rowid = $commande_id\";__N__$result_check_commande = $db->query($sql_check_commande);__N____N__if ($db->num_rows($result_check_commande) == 0) {__N__    echo \"Commande avec l\'ID $commande_id introuvable\";__N__    exit;__N__}__N____N__// Récupérer la référence de la commande__N__$commande = $db->fetch_object($result_check_commande);__N__$commande_ref = $commande->ref;__N____N__// Construire le chemin du fichier PDF__N__$pdf_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/documents/commande/\' . $commande_ref . \'/\' . $commande_ref . \'.pdf\';__N____N__// Vérifier si le fichier PDF existe__N__if (file_exists($pdf_path)) {__N__    // Envoyer les en-têtes HTTP pour forcer le téléchargement__N__    header(\'Content-Disposition: attachment; filename=\"\' . basename($pdf_path) . \'\"\');__N__    header(\'Content-Length: \' . filesize($pdf_path));__N__    header(\'Pragma: public\');__N__    header(\'Cache-Control: must-revalidate, post-check=0, pre-check=0\');__N__    header(\'Expires: 0\');__N____N__    // Désactiver la mise en mémoire tampon de sortie__N__    if (ob_get_level()) {__N__        ob_end_clean();__N__    }__N____N__    // Lire et envoyer le fichier PDF au navigateur__N__    readfile($pdf_path);__N__    exit;__N__} else {__N__    // Si le fichier n\'existe pas, afficher un message d\'erreur__N__    echo \"Le fichier PDF pour la commande $commande_ref n\'existe pas.\";__N__    exit;__N__}__N__?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 78 -> 10__+MAX_llx_website_page__ - Aliases detailsfacture --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(10__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'detailsfacture', '', 'detailsfacture', '', '', '', '', '1', '2024-07-24 13:36:24', '2024-07-24 15:36:55', null, '', 'page', '', '<?php__N__// Inclure les fichiers nécessaires et démarrer la session__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__require_once $main_inc_path;__N____N__session_start();__N____N__// Vérifier la connexion de l\'utilisateur__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if (!$db) {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__// Récupérer et nettoyer l\'ID de facture à partir de l\'URL__N__$facture_id = intval($_GET[\'facture_id\']);__N____N__// Récupérer les informations de la facture depuis la base de données__N__$sql_check_facture = \"SELECT rowid, ref FROM \" . MAIN_DB_PREFIX . \"facture WHERE rowid = $facture_id\";__N__$result_check_facture = $db->query($sql_check_facture);__N____N__if ($db->num_rows($result_check_facture) == 0) {__N__    echo \"facture avec l\'ID $facture_id introuvable\";__N__    exit;__N__}__N____N__// Récupérer la référence de la facture__N__$facture = $db->fetch_object($result_check_facture);__N__$facture_ref = $facture->ref;__N____N__// Construire le chemin du fichier PDF__N__$pdf_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/documents/facture/\' . $facture_ref . \'/\' . $facture_ref . \'.pdf\';__N____N__// Vérifier si le fichier PDF existe__N__if (file_exists($pdf_path)) {__N__    // Envoyer les en-têtes HTTP pour forcer le téléchargement__N__    header(\'Content-Disposition: attachment; filename=\"\' . basename($pdf_path) . \'\"\');__N__    header(\'Content-Length: \' . filesize($pdf_path));__N__    header(\'Pragma: public\');__N__    header(\'Cache-Control: must-revalidate, post-check=0, pre-check=0\');__N__    header(\'Expires: 0\');__N____N__    // Désactiver la mise en mémoire tampon de sortie__N__    if (ob_get_level()) {__N__        ob_end_clean();__N__    }__N____N__    // Lire et envoyer le fichier PDF au navigateur__N__    readfile($pdf_path);__N__    exit;__N__} else {__N__    // Si le fichier n\'existe pas, afficher un message d\'erreur__N__    echo \"Le fichier PDF pour la facture $facture_ref n\'existe pas.\";__N__    exit;__N__}__N__?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 79 -> 11__+MAX_llx_website_page__ - Aliases detailspropale --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(11__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'detailspropale', '', 'detailspropale', '', '', '', '', '1', '2024-07-24 13:44:26', '2024-07-24 15:44:40', null, '', 'page', '', '<?php__N__// Inclure les fichiers nécessaires et démarrer la session__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__require_once $main_inc_path;__N____N__session_start();__N____N__// Vérifier la connexion de l\'utilisateur__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if (!$db) {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__// Récupérer et nettoyer l\'ID de propal à partir de l\'URL__N__$propal_id = intval($_GET[\'propal_id\']);__N____N__// Récupérer les informations de la propal depuis la base de données__N__$sql_check_propal = \"SELECT rowid, ref FROM \" . MAIN_DB_PREFIX . \"propal WHERE rowid = $propal_id\";__N__$result_check_propal = $db->query($sql_check_propal);__N____N__if ($db->num_rows($result_check_propal) == 0) {__N__    echo \"propal avec l\'ID $propal_id introuvable\";__N__    exit;__N__}__N____N__// Récupérer la référence de la propal__N__$propal = $db->fetch_object($result_check_propal);__N__$propal_ref = $propal->ref;__N____N__// Construire le chemin du fichier PDF__N__$pdf_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/documents/propale/\' . $propal_ref . \'/\' . $propal_ref . \'.pdf\';__N____N__// Vérifier si le fichier PDF existe__N__if (file_exists($pdf_path)) {__N__    // Envoyer les en-têtes HTTP pour forcer le téléchargement__N__    header(\'Content-Disposition: attachment; filename=\"\' . basename($pdf_path) . \'\"\');__N__    header(\'Content-Length: \' . filesize($pdf_path));__N__    header(\'Pragma: public\');__N__    header(\'Cache-Control: must-revalidate, post-check=0, pre-check=0\');__N__    header(\'Expires: 0\');__N____N__    // Désactiver la mise en mémoire tampon de sortie__N__    if (ob_get_level()) {__N__        ob_end_clean();__N__    }__N____N__    // Lire et envoyer le fichier PDF au navigateur__N__    readfile($pdf_path);__N__    exit;__N__} else {__N__    // Si le fichier n\'existe pas, afficher un message d\'erreur__N__    echo \"Le fichier PDF pour la propal $propal_ref n\'existe pas.\";__N__    exit;__N__}__N__?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 80 -> 12__+MAX_llx_website_page__ - Aliases facture --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(12__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'facture', '', 'facture', 'facture', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-12 11:04:15', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $datec = isset($_GET[\'datec\']) ? $_GET[\'datec\'] : \'\';__N__    $date_lim_reglement = isset($_GET[\'date_lim_reglement\']) ? $_GET[\'date_lim_reglement\'] : \'\';__N__    $filter_statut = isset($_GET[\'filter-statut\']) ? $_GET[\'filter-statut\'] : \'\'; // Filtre statut__N____N__    // Requête SQL pour obtenir la somme totale des total_ht des factures de la société connectée__N__    $query_total_ht = \"SELECT SUM(total_ht) AS total_ht_sum FROM \" . MAIN_DB_PREFIX . \"facture WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_ht = $db->query($query_total_ht);__N__    $total_ht_sum = 0;__N____N__    if ($result_total_ht) {__N__        $row_total_ht = $db->fetch_object($result_total_ht);__N__        if ($row_total_ht) {__N__            $total_ht_sum = $row_total_ht->total_ht_sum;__N__        }__N__    }__N____N__    // Requête SQL initiale pour récupérer les factures et les montants payés__N__    $sql = \"SELECT f.rowid AS facture_id, __N__               f.ref, __N__               f.datec, __N__               f.date_lim_reglement, __N__               f.total_ht, __N__               f.total_tva, __N__               f.total_ttc, __N__               f.multicurrency_total_ttc, __N__               f.fk_statut, __N__               f.type, __N__               f.paye, __N__               (SELECT SUM(pf.amount) __N__                FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf __N__                WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__        FROM \" . MAIN_DB_PREFIX . \"facture f__N__        WHERE f.fk_soc = \" . intval($societe_id) . \"__N__          AND f.type != 3 AND f.fk_statut !=0\";__N__          /* $sql = \"SELECT f.rowid AS facture_id, f.ref, f.datec, f.date_lim_reglement, f.total_ht, f.total_tva, f.total_ttc, f.multicurrency_total_ttc, f.fk_statut, f.type, f.paye, __N__                   (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__            FROM \" . MAIN_DB_PREFIX . \"facture f__N__            WHERE f.fk_soc = \" . intval($societe_id); */__N____N__    __N__    // Ajouter les critères de recherche selon les paramètres fournis__N__    if (!empty($ref)) {__N__        $sql .= \" AND f.ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N__    if (!empty($datec)) {__N__        $sql .= \" AND f.datec = \'\" . $db->escape($datec) . \"\'\";__N__    }__N__    if (!empty($date_lim_reglement)) {__N__        $sql .= \" AND f.date_lim_reglement = \'\" . $db->escape($date_lim_reglement) . \"\'\";__N__    }__N__    if (!empty($filter_statut)) {__N__        if ($filter_statut == \'1\') {__N__            $sql .= \" AND f.fk_statut = 1 AND f.paye = 0 AND f.type = 0 AND (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) = 0\";__N__        } elseif ($filter_statut == \'2\') {__N__            $sql .= \" AND f.fk_statut = 1 AND f.paye = 0 AND f.type = 0\";__N__        } elseif ($filter_statut == \'3\') {__N__            $sql .= \" AND f.fk_statut = 2 AND f.paye = 1 AND f.type = 2\";__N__        } elseif ($filter_statut == \'4\') {__N__            $sql .= \" AND f.fk_statut = 2 AND f.paye = 1 AND f.type = 3\";__N__        } elseif ($filter_statut == \'5\') {__N__            $sql .= \" AND NOT (f.fk_statut = 1 AND f.paye = 0 AND f.type = 0 AND (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) = 0)__N__                      AND NOT (f.fk_statut = 1 AND f.paye = 0 AND f.type = 0)__N__                      AND NOT (f.fk_statut = 2 AND f.paye = 1 AND f.type = 2)__N__                      AND NOT (f.fk_statut = 2 AND f.paye = 1 AND f.type = 3)\";__N__        }__N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__$link_to_page_imp = dol_buildpath(\'Detailsfacture.php\', 1);__N__$link_to_page = dol_buildpath(\'public/website/index.php\', 1) . \'?website=ebusinessTester1&pageref=facture\';__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE FACTURE</th>__N__                            <th>DATE facturation</th>__N__                            <th>Date échéance</th>__N__                            <th>mode de règlement</th>__N__                            <th>MONTANT HT</th>__N__                            <th>MONTANT TVA</th>__N__                            <th>MONTANT TTC</th>__N__                            <th>reçu</th>__N__                            <th>créance</th>__N__                            __N__                            <style>__N__                                .filter-statut {__N__                                    position: absolute;__N__                                    top: 0;__N__                                    width: 100%;__N__                                    height: 80%;__N__                                    left: 10px;__N__                                    font-size: 14px;__N__                                }__N__                                __N__                                #filter-statut {__N__                                    opacity: 0;__N__                                    height: 100%;__N__                                    width: 100%;__N__                                    padding: 10px;__N__                                    cursor: pointer;__N__                                }__N__                                __N__                                .box-filter {__N__                                    display: flex;__N__                                    align-items: center;__N__                                }__N__                                __N__                            </style>__N__                            __N__                            <th style=\"position: relative;\">__N__                                <div class=\"filter-statut\">__N__                                    <form action=\"<?php echo htmlspecialchars($link_to_page); ?>\" method=\"get\">__N__                                        <input type=\"hidden\" name=\"website\" value=\"ebusinessTester1\">__N__                                        <input type=\"hidden\" name=\"pageref\" value=\"facture\">__N__                                        <label></i></label>__N__                                        <select name=\"filter-statut\" id=\"filter-statut\" onchange=\"this.form.submit()\">__N__                                            <option value=\"\" <?php if ($filter_statut == \'\') echo \'selected\'; ?>>Tout</option>__N__                                            <option value=\"1\" <?php if ($filter_statut == \'1\') echo \'selected\'; ?>>Commencée</option>__N__                                            <option value=\"2\" <?php if ($filter_statut == \'2\') echo \'selected\'; ?>>Impayée</option>__N__                                            <option value=\"3\" <?php if ($filter_statut == \'3\') echo \'selected\'; ?>>Remboursé</option>__N__                                            <option value=\"4\" <?php if ($filter_statut == \'4\') echo \'selected\'; ?>>Payé</option>__N__                                            <option value=\"5\" <?php if ($filter_statut == \'5\') echo \'selected\'; ?>>Autre</option>__N__                                        </select>__N__                                    </form>__N__                                </div>__N__                                <span class=\"box-filter\">__N__                                    STATUT<i class=\'bx bx-filter\' style=\"margin-left: 4px;\"></i>__N__                                </span>__N__                            </th>__N__                            <th>Action</th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        // Initialisation des totaux__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N__                        $total_recu_sum = 0;__N__                        $total_creance_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                // Calcul de la créance__N__                                $creance = $row->total_ttc - $row->total_amount_recu;__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N__                                $total_recu_sum += $row->total_amount_recu;__N__                                $total_creance_sum += $creance;__N____N__                                echo \"<tr>\";__N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->date_lim_reglement)) . \"</td>\";__N__                                echo \"<td></td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_amount_recu, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($creance, 3, \',\', \' \') . \" TND</td>\";__N____N__                                // Affichage du statut en fonction de la valeur de fk_statut__N__                                if ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0 && $row->total_amount_recu == 0) {__N__                                    echo \"<td>impayée</td>\";__N__                                    __N__                                } elseif ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0) {__N__                                    echo \"<td>Commencée</td>\";__N__                                    __N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 2) {__N__                                    echo \"<td>Remboursé</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 3) {__N__                                    echo \"<td>Payé</td>\";__N__                                } else {__N__                                    echo \"<td>Autre</td>\"; // Gérer les autres cas si nécessaire__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page_imp . \'?facture_id=\' . $row->facture_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'12\'>Aucune Facture trouvée</td></tr>\"; // Modifié pour correspondre au nombre de colonnes__N__                        }__N__                        ?>__N__                    </tbody>__N__                    <tfoot>__N__                        <tr>__N__                            <td colspan=\"4\"><strong>Total</strong></td>__N__                            <td><strong><?php echo number_format($total_ht_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_tva_sum, 3, \',\', \' \'); ?></strong></td>__N__                            <td><strong><?php echo number_format($total_ttc_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_recu_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_creance_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td colspan=\"3\"></td>__N__                        </tr>__N__                    </tfoot>__N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 81 -> 13__+MAX_llx_website_page__ - Aliases footer --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(13__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'footer', '', 'Footer', 'Footer', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-08 15:19:57', null, '', 'other', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<section id=\"footer\" contenteditable=\"true\">__N__            <!-- Footer -->__N__        <footer class=\"site-footer section-padding\">__N__            <div class=\"container\">__N__                <div class=\"row\">__N__                    <div class=\"col-lg-4 col-md-7 col-xs-12 tooplate-mt30\">__N__                        <h6 class=\"text-white mb-lg-4 mb-3\"><?php echo $weblangs->trans(\"Location\"); ?></h6>__N____N__                        <p><?php echo $mysoc->getFullAddress(); ?></p>__N____N__                        <a href=\"contact.php#divaddress\" class=\"custom-btn btn btn-dark mt-2\"><?php echo $weblangs->trans(\"Map\"); ?></a>__N__                    </div>__N____N__                    <div class=\"col-lg-4 col-md-5 col-xs-12 tooplate-mt30\">__N__                        <h6 class=\"text-white mb-lg-4 mb-3\">Opening Hours</h6>__N____N__<?php__N__$days = [\"MONDAY\", \"TUESDAY\", \"WEDNESDAY\", \"THURSDAY\", \"FRIDAY\"];__N__$fixedHours = \"08:00 PM To 06:00 AM\";__N____N__foreach ($days as $day) {__N__    echo \"<p>$day : $fixedHours</p>\";__N__}__N__?>__N____N____N____N__                        <p>__N__                            Tel:__N__                            <a href=\"tel: <?php echo $mysoc->phone ?>\" class=\"tel-link\"__N__                                ><?php echo $mysoc->phone ?></a__N__                            >__N__                        </p>__N__                    </div>__N____N__                    <div class=\"col-lg-4 col-md-6 col-xs-12 tooplate-mt30\">__N__                        <h6 class=\"text-white mb-lg-4 mb-3\">Social</h6>__N____N__                        <ul class=\"social-icon\">__N__                             <?php foreach($mysoc->socialnetworks as $key => $value) {__N__                                print \'<li> <a class=\"btn btn-perso2 btn-floating m-1\" href=\"\'. (preg_match(\'/^http/\', $value) ? $value : \'https://www.\'.$key.\'.com/\'.$value).\'\"><span class=\"fab fa-\'.$key.\'\"></i></a> </li>\';__N__                             } ?>__N____N__                       __N__                        </ul>__N____N__                        <p class=\"copyright-text tooplate-mt60\">__N__                            Copyright © <?php echo $mysoc->name; ?>__N__                        </p>__N__                    </div>__N__                </div>__N__                <!-- row ending -->__N__            </div>__N__            <!-- container ending -->__N__        </footer>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 82 -> 14__+MAX_llx_website_page__ - Aliases header --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(14__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'header', '', 'Header', 'Header', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-07 13:09:07', null, '', 'menu', '', '<?php __N__session_start();__N____N__?>__N____N__<section id=\"header\" contenteditable=\"true\">__N__    __N__    <nav class=\"newNavbar<?php echo ($websitepage->ref == \'catalogue\' || $websitepage->ref == \'index\' ? \' transparent\' : \'\'); ?>\">__N__            __N__            <a class=\"navbar-brand\" href=\"index.php\">__N__                <img src=\"image/__WEBSITE_KEY__/header/logo_zai_b 1.png\" alt=\"Logo\" style=\"max-height: 150px; width: 150px;\">__N__            </a>__N____N__            __N____N__            <div class=\"container-link\" id=\"navbarNav\">__N__                __N__                <a class=\"nav-link<?php echo ($websitepage->ref == \'index\' ? \' active\' : \'\'); ?>\" href=\"index.php\"><?php echo $weblangs->trans(\"Home\"); ?></a>__N__                 __N__                <!--<a class=\"nav-link<?php echo ($websitepage->ref == \'profil\' ? \' active\' : \'\'); ?>\" href=\"profil.php\"><?php echo $weblangs->trans(\"Profil\"); ?></a>-->__N__                 __N__                <a class=\"nav-link<?php echo ($websitepage->ref == \'produit\' ? \' active\' : \'\'); ?>\" href=\"catalogue.php\"><?php echo $weblangs->trans(\"Catalogue\"); ?></a>__N__           __N__                <a class=\"nav-link<?php echo ($websitepage->ref == \'panier\' ? \' active\' : \'\'); ?>\" href=\"panier.php\"><?php echo $weblangs->trans(\"Panier\"); ?></a>__N__              __N__            </div>__N____N__            __N__            <!--<div class=\"d-none d-lg-block\">-->__N__            <!--    <a href=\"login.php\"-->__N__            <!--        type=\"button\"-->__N__            <!--        class=\"custom-btn btn btn-danger\"-->__N__            <!--        data-bs-toggle=\"modal\"-->__N__            <!--        data-bs-target=\"#BookingModal\"-->__N__            <!--        <a class=\"nav-link<?php echo ($websitepage->ref == \'Login\' ? \' active\' : \'\'); ?>\" href=\"login.php\"><?php echo $weblangs->trans(\"Login\"); ?></a>-->__N__            <!--</div>-->__N__           __N__           __N__           __N__           __N__           __N__            <?php if (!isset($_SESSION[\'valid\'])) : ?>__N__            <a href=\"login.php\">__N__                <button class=\"normaldzq\"><i class=\'bx bxs-user\'></i>Votre espace client </button>__N__            </a>__N__            <?php else :?>__N__            <div class=\"login-disco\">__N__                __N__            <a href=\"profil.php\">__N__                <button class=\"normaldzq\"><i class=\'bx bxs-user\'></i>Mon espace client</button>__N__            </a>__N__            <a href=\"logout2.php\">__N__               <i class=\'bx bx-log-out\'></i>__N__            </a>__N__            </div>__N__            <?php endif; ?>__N__                __N__            __N__    </nav>__N__</section>__N____N____N____N____N____N____N__<style>__N__    __N__    :root {__N__    --color-first: #263c5c;__N__    --color-second: #f6f8fb;__N__    --color-third: #000000;__N__    }__N__    __N__    .login-disco {__N__        display: flex;__N__        gap: 20px;__N__        flex-direction: row;__N__        align-items: center;__N__    }__N__    .login-disco .bx-log-out{__N__        font-size: 2.2rem;__N__        transform: rotate(180deg);__N__        color: #f0f0f0;__N__        transition: .4s;__N__    }__N__    .login-disco .bx-log-out:hover {__N__        transform: translateX(10px) rotate(180deg);__N__    }__N____N__    .newNavbar {__N__        background : var(--color-first);__N__        display: flex;__N__        align-content: center;__N__        align-items: center;__N__        justify-content: space-around;__N__        padding: 12px 20px;__N__        position: relative;__N__        box-shadow: 0 2px 6px #00000047;__N__        z-index: 100;__N__    }__N__    __N__    .container-link {__N__        display: flex;__N__        gap: 10px;__N__          __N__    }__N__    __N__    .container-link .nav-link {__N__        margin: 0 20px;  __N__        font-family: \"Roboto\", sans-serif;__N__        font-size: 26px !important;__N__        color: var(--color-second) !important; __N__        letter-spacing: 1px;__N__    }__N__    __N__    .normaldzq {__N__        text-transform: uppercase!important;__N__        font-size: 20px !important;__N__        color: var(--color-third)!important;__N__        border: none!important;__N__        padding: 10px 16px!important;__N__        display: flex!important;__N__        align-items: center;__N__        font-weight: 600;__N__        gap: 6px;__N__        letter-spacing: 1px;__N__        font-family: \"Roboto\", sans-serif !important;__N__        border-radius: 16px !important;__N__        transition: .4s;__N__         will-change: transform;__N__    }__N__    __N__    .normaldzq:hover {__N__        transform: scale(105%);__N__        color: var(--color-second) !important;__N__        background: #9ab4d1;__N__    }__N__    __N__    __N__     __N__    __N__    __N____N__ __N__    __N__    __N__</style>__N____N____N____N____N____N____N____N____N____N____N____N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 83 -> 15__+MAX_llx_website_page__ - Aliases index --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(15__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'index', '', 'index', 'index', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-09 10:53:41', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $datec = isset($_GET[\'datec\']) ? $_GET[\'datec\'] : \'\';__N__    $date_lim_reglement = isset($_GET[\'date_lim_reglement\']) ? $_GET[\'date_lim_reglement\'] : \'\';__N__    $filter_statut = isset($_GET[\'filter-statut\']) ? $_GET[\'filter-statut\'] : \'\'; // Filtre statut__N____N__    // Requête SQL pour obtenir la somme totale des total_ht des factures de la société connectée__N__    $query_total_ht = \"SELECT SUM(total_ht) AS total_ht_sum FROM \" . MAIN_DB_PREFIX . \"facture WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_ht = $db->query($query_total_ht);__N__    $total_ht_sum = 0;__N____N__    if ($result_total_ht) {__N__        $row_total_ht = $db->fetch_object($result_total_ht);__N__        if ($row_total_ht) {__N__            $total_ht_sum = $row_total_ht->total_ht_sum;__N__        }__N__    }__N____N__    // Requête SQL initiale pour récupérer les factures et les montants payés__N__    $sql = \"SELECT f.rowid AS facture_id, f.ref, f.datec, f.date_lim_reglement, f.total_ht, f.total_tva, f.total_ttc, f.multicurrency_total_ttc, f.fk_statut, f.type, f.paye, __N__                   (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__            FROM \" . MAIN_DB_PREFIX . \"facture f__N__            WHERE f.fk_soc = \" . intval($societe_id);__N__    __N__    // Ajouter les critères de recherche selon les paramètres fournis__N__    if (!empty($ref)) {__N__        $sql .= \" AND f.ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N__    if (!empty($datec)) {__N__        $sql .= \" AND f.datec = \'\" . $db->escape($datec) . \"\'\";__N__    }__N__    if (!empty($date_lim_reglement)) {__N__        $sql .= \" AND f.date_lim_reglement = \'\" . $db->escape($date_lim_reglement) . \"\'\";__N__    }__N__    if (!empty($filter_statut)) {__N__        if ($filter_statut == \'1\') {__N__            $sql .= \" AND f.fk_statut = 1 AND f.paye = 0 AND f.type = 0 AND (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) = 0\";__N__        } elseif ($filter_statut == \'2\') {__N__            $sql .= \" AND f.fk_statut = 1 AND f.paye = 0 AND f.type = 0\";__N__        } elseif ($filter_statut == \'3\') {__N__            $sql .= \" AND f.fk_statut = 2 AND f.paye = 1 AND f.type = 2\";__N__        } elseif ($filter_statut == \'4\') {__N__            $sql .= \" AND f.fk_statut = 2 AND f.paye = 1 AND f.type = 3 OR f.type = 3\";__N__        }__N__        __N__        // elseif ($filter_statut == \'4\') {__N__        //     $sql .= \" AND f.fk_statut = 2 AND f.paye = 1 AND (f.type = 3 OR f.type NOT IN (0, 2, 3))\";__N__        // }__N____N____N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N____N__$link_to_page_imp = dol_buildpath(\'Detailsfacture.php\', 1);__N__$link_to_page = dol_buildpath(\'facture.php\', 1);__N__?>__N____N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE FACTURE</th>__N__                            <th>DATE facturation</th>__N__                            <th>Date échéance</th>__N__                            <th>mode de règlement</th>__N__                            <th>MONTANT HT</th>__N__                            <th>MONTANT TVA</th>__N__                            <th>MONTANT TTC</th>__N__                            <th>reçu</th>__N__                            <th>créance</th>__N__                            __N__                            <style>__N__                                .filter-statut {__N__                                    position: absolute;__N__                                    top: 0;__N__                                    width: 100%;__N__                                    height: 80%;__N__                                    left: 10px;__N__                                    font-size: 14px;__N__                                }__N__                                __N__                                #filter-statut {__N__                                    opacity: 0;__N__                                    height: 100%;__N__                                    width: 100%;__N__                                    padding: 10px;__N__                                    cursor: pointer;__N__                                }__N__                                __N__                                .box-filter {__N__                                    display: flex;__N__                                    align-items: center;__N__                                }__N__                                __N__                            </style>__N__                            __N__                            <th style=\"position: relative;\">__N__                                <div class=\"filter-statut\">__N__                                    <form action=\"<?php echo htmlspecialchars($link_to_page); ?>\" method=\"get\">__N__                                        <input type=\"hidden\" name=\"website\" value=\"ZaiPortal\">__N__                                        <input type=\"hidden\" name=\"pageref\" value=\"facture\">__N__                                        <label></i></label>__N__                                        <select name=\"filter-statut\" id=\"filter-statut\" onchange=\"this.form.submit()\">__N__                                            <option value=\"\" <?php if ($filter_statut == \'\') echo \'selected\'; ?>>Tout</option>__N__                                            <option value=\"1\" <?php if ($filter_statut == \'1\') echo \'selected\'; ?>>Commencée</option>__N__                                            <option value=\"2\" <?php if ($filter_statut == \'2\') echo \'selected\'; ?>>Impayée</option>__N__                                            <option value=\"3\" <?php if ($filter_statut == \'3\') echo \'selected\'; ?>>Remboursé</option>__N__                                            <option value=\"4\" <?php if ($filter_statut == \'4\') echo \'selected\'; ?>>Payé</option>__N__                                        </select>__N__                                    </form>__N__                                </div>__N__                                <span class=\"box-filter\">__N__                                    STATUT<i class=\'bx bx-filter\' style=\"margin-left: 4px;\"></i>__N__                                </span>__N__                            </th>__N__                            <th>Action</th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        // Initialisation des totaux__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N__                        $total_recu_sum = 0;__N__                        $total_creance_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                // Calcul de la créance__N__                                $creance = $row->total_ttc - $row->total_amount_recu;__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N__                                $total_recu_sum += $row->total_amount_recu;__N__                                $total_creance_sum += $creance;__N____N__                                echo \"<tr>\";__N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->date_lim_reglement)) . \"</td>\";__N__                                echo \"<td></td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_amount_recu, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($creance, 3, \',\', \' \') . \" TND</td>\";__N____N__                                // Affichage du statut en fonction de la valeur de fk_statut__N__                                if ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0 && $row->total_amount_recu == 0) {__N__                                    echo \"<td>Impayée</td>\";__N__                                    __N__                                } elseif ($row->fk_statut == 1 && $row->paye == 0 && $row->type == 0) {__N__                                    echo \"<td>Commencée</td>\";__N__                                    __N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1 && $row->type == 2) {__N__                                    echo \"<td>Remboursé</td>\";__N__                                } elseif ($row->fk_statut == 2 && $row->paye == 1) {__N__                                    echo \"<td>Payé</td>\";__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page_imp . \'?facture_id=\' . $row->facture_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'12\'>Aucune Facture trouvée</td></tr>\"; // Modifié pour correspondre au nombre de colonnes__N__                        }__N__                        ?>__N__                    </tbody>__N__                    <tfoot>__N__                        <tr>__N__                            <td colspan=\"4\"><strong>Total</strong></td>__N__                            <td><strong><?php echo number_format($total_ht_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_tva_sum, 3, \',\', \' \'); ?></strong></td>__N__                            <td><strong><?php echo number_format($total_ttc_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_recu_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_creance_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td colspan=\"3\"></td>__N__                        </tr>__N__                    </tfoot>__N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
UPDATE llx_website SET fk_default_home = 15__+MAX_llx_website_page__ WHERE rowid = __WEBSITE_ID__;
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 84 -> 16__+MAX_llx_website_page__ - Aliases login --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(16__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'login', '', 'login', 'login', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-05 12:46:59', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N____N__$login_success = false;__N__$error_message = \'\';__N____N__if (isset($_POST[\'submit\'])) {__N__    // Connexion à la base de données Dolibarr__N__    global $db;__N____N__    if ($db) {__N__        // Échapper les valeurs des champs de formulaire__N__        $email = trim($db->escape($_POST[\'email\']));__N__        $code_client = trim($db->escape($_POST[\'code_client\']));__N____N__        // Récupérer l\'utilisateur avec l\'email donné__N__        $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"societe WHERE email=\'\" . $email . \"\'\";__N__        $result = $db->query($sql);__N____N__        if ($result) {__N__            $row = $db->fetch_object($result);__N____N__            if ($row) {__N__                // Vérifier le code_client__N__                if ($code_client === $row->code_client) {__N__                    // Définir les variables de session__N__                    $_SESSION[\'valid\'] = $row->email;__N__                    $_SESSION[\'societe\'] = $row->nom;__N__                    $_SESSION[\'id\'] = $row->rowid;__N__                    $login_success = true;__N__                } else {__N__                    $error_message = \"Email ou code client incorrect\";__N__                }__N__            } else {__N__                $error_message = \"Email ou code client incorrect\";__N__            }__N__        } else {__N__            $error_message = \"Erreur de sélection : \" . $db->lasterror();__N__        }__N__    } else {__N__        $error_message = \"Erreur de connexion à la base de données.\";__N__    }__N__}__N____N__// includeContainer(\'header\');__N____N__?>__N____N____N__<style>__N____N__    :root {__N__    --color-first: #263c5c;__N__    --color-second: #f6f8fb;__N__    --color-third: #000000;__N__    }__N__    __N____N__    .mysection1.login {__N__        background: var(--color-second) !important;__N__        height: 100vh;__N__        width: 100vw;__N__        overflow: hidden;__N__        display: flex;__N__        position: absolute;__N__        top: 0;__N__        left: 0;__N__        align-items: center;__N__        justify-content: center;__N__        z-index: 500;__N__        overflow: hidden;__N__    }__N__    __N__    .login-main {__N__        display: flex;__N__        width: 92%;__N__        flex-direction: column;__N__        align-items: center;__N__        justify-content: center;__N__    }__N__    __N__    .login-title {__N__        font-family: \"JetBrains Mono\", monospace;__N__        font-size: 42px !important;__N__        color: var(--color-first);__N__            margin: 3vh 0 !important;__N__    }__N__    __N__    .login-title span {__N__        color: var(--color-first) !important;__N__    }__N__    __N__    .email-input {__N__        border: solid 1px #263c5c;__N__        padding: 13px;__N__        font-size: 20px;__N__        border-radius: 14px;__N__    }__N__    __N__    .bodywebsite .custom-form .form-control {__N__        border: solid 1px #263c5c;__N__        padding: 13px;__N__        font-size: 20px;__N__        font-family: \"Roboto\", sans-serif;__N__        border-radius: 14px;__N__        margin-bottom: 30px;__N__        box-shadow: 0 3px 4px rgb(0 0 0 / 15%);__N__        transition: .4s;__N__    }__N__    __N__    .bodywebsite .custom-form .form-control::placeholder {__N__        font-size: 18px !important;__N__        letter-spacing: 1px;__N__        color: #404040a6 !important;__N__    }__N__    __N__    .bodywebsite .form-label {__N__        color: var(--color-third);__N__        letter-spacing: 1px;__N__        padding-left: 6px;__N__        font-family: \"Roboto\", sans-serif!important;__N__        font-weight: 400;__N__    }__N__    __N__    .bodywebsite .form-control:focus {__N__        outline: none!important;__N__        border: solid 2px #263c5c;__N__    }__N__    __N__    .login-button {__N__        position: relative;__N__        width: 100%;__N__        display: flex;__N__        align-items: center;__N__        justify-content: center;__N__    }__N__    __N__    .login-button button {__N__        text-transform: uppercase !important;__N__    font-size: 24px !important;__N__    color: var(--color-second) !important;__N__    border: none !important;__N__    padding: 10px 14px !important;__N__    display: flex !important;__N__    align-items: center;__N__    font-weight: 600;__N__    gap: 13px;__N__    width: 45% !important;__N__    letter-spacing: 1px;__N__    font-family: \"Roboto\", sans-serif !important;__N__    border-radius: 18px !important;__N__    transition: .4s;__N__    will-change: transform;__N__    justify-content: center;__N__    background: var(--color-first) !important;__N__    }__N__    __N__    .login-button button:hover {__N__        transform: scale(105%);__N__        color: var(--color-first) !important;__N__        background: #9ab4d1 !important;__N__    }__N__    __N__    .login-button i {__N__        font-size: 24px !important;__N__    }__N__    __N__    .login-main .desc-text {__N__        color: #4a4a4a85;__N__        letter-spacing: 1px;__N__        position: relative;__N__        text-align: center;__N__        width: 45%;__N__        margin-bottom: 5vh;__N__        font-family: \"Roboto\", sans-serif;__N__    }__N__    __N__    __N__ __N__    __N__    __N__    __N__    __N__    __N__</style>__N____N____N__<section id=\"mysection1\" class=\"mysection1 login\" contenteditable=\"true\">__N__    __N__    <div class=\"login-main\">__N__        __N__                        <img src=\"image/__WEBSITE_KEY__/logo_zai_login.png\" alt=\"Logo\" style=\"max-height: 200px; width: 200px;\">__N__                        <h2 class=\"login-title\">Votre <span>espace</span> client</h2>__N__                        <p class=\"desc-text\">Cet espace client est dédié à la consultation de vos pièces commerciales, votre solde actuel  ainsi que vos Ticket en cours de traitement. Vous pouvez consulter notre catalogue produit, aussi passer commande en ligne ou  contacter l\'équipe de support.</p>__N__                        __N__                        <?php if ($error_message): ?>__N__                            <div class=\"alert alert-danger\"><?php echo $error_message; ?></div>__N__                        <?php endif; ?>__N____N__                    <div class=\"col-lg-6 col-12\">__N__                        <form class=\"custom-form contact-form row\" action=\"\" method=\"post\" role=\"form\">__N__                            <input type=\"hidden\" name=\"action\" value=\"sendmail\">__N__                            <input type=\"hidden\" name=\"token\" value=\"<?php echo newToken(); ?>\">__N____N__                            <div class=\"col-12\">__N__                                <label for=\"email\" class=\"form-label\"><?php echo $weblangs->trans(\"Email\"); ?></label>__N__                                <input type=\"email\" name=\"email\" id=\"email\" pattern=\"[^ @]*@[^ @]*\" class=\"form-control\" placeholder=\"Saisir votre e-mail\" required=\"\">__N__                            </div>__N____N__                            <div class=\"col-12\">__N__                                <label for=\"code_client\" class=\"form-label\">Code Client</label>__N__                                <input type=\"password\" name=\"code_client\" id=\"code_client\" class=\"form-control\" placeholder=\"Saisir votre code Client\" required=\"\">__N__                            </div>__N____N__                            <div class=\"login-button\">__N__                                <button type=\"submit\" name=\"submit\" class=\"form-control\">Se connecter<i class=\'bx bx-log-in\' ></i></button>__N__                            </div>__N__                        </form>__N____N__                        <?php if ($login_success): ?>__N__                            <!-- Lien vers Commandes.php avec ID pour le cibler avec JavaScript -->__N__                            <div class=\"col-lg-5 col-12 ms-auto mt-3\">__N__                                <a href=\"profil.php\" id=\"commandesLink\" class=\"butAction ms-4\"></a>__N__                            </div>__N__                            <script>__N__                                // Script JavaScript pour redirection automatique si login réussi__N__                                window.onload = function() {__N__                                    var commandesLink = document.getElementById(\'commandesLink\');__N__                                    if (commandesLink) {__N__                                        commandesLink.click(); // Simuler un clic sur le lien pour la redirection__N__                                    }__N__                                };__N__                            </script>__N__                        <?php endif; ?>__N__                    </div>__N__                    __N__                    __N__                </div>__N__        </section>__N__    </main>__N__</section>__N____N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 85 -> 17__+MAX_llx_website_page__ - Aliases logout --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(17__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'logout', '', 'logout', 'logout', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-08 15:19:57', null, '', 'page', '', '<?php__N__session_start();__N____N__// Détruire toutes les variables de session__N__$_SESSION = array();__N____N__// Si vous souhaitez détruire complètement la session, effacer également le cookie de session.__N__if (ini_get(\"session.use_cookies\")) {__N__    $params = session_get_cookie_params();__N__    setcookie(session_name(), \'\', time() - 42000,__N__        $params[\"path\"], $params[\"domain\"],__N__        $params[\"secure\"], $params[\"httponly\"]__N__    );__N__}__N____N__// Enfin, détruire la session.__N__session_destroy();__N____N__// Rediriger vers la page de connexion ou la page d\'accueil__N__header(\"Location: Login.php\");__N__exit;__N__?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 86 -> 18__+MAX_llx_website_page__ - Aliases logout2 --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(18__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'logout2', '', 'logout2', '', '', '', '', '1', '2024-07-30 15:33:50', '2024-07-30 15:34:38', null, '', 'page', '', '<?php__N__session_start();__N____N__// Détruire toutes les variables de session__N__$_SESSION = array();__N____N__// Si vous voulez détruire complètement la session, supprimez aussi le cookie de session__N__if (ini_get(\"session.use_cookies\")) {__N__    $params = session_get_cookie_params();__N__    setcookie(session_name(), \'\', time() - 42000,__N__        $params[\"path\"], $params[\"domain\"],__N__        $params[\"secure\"], $params[\"httponly\"]__N__    );__N__}__N____N__// Finalement, détruire la session__N__session_destroy();__N____N__// Rediriger l\'utilisateur vers la page de connexion__N__   include \'login.php\';__N__exit;__N__?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 87 -> 19__+MAX_llx_website_page__ - Aliases menu --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(19__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'menu', '', 'Our menus', 'Our menus', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-08 15:19:57', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N____N__<?php includeContainer(\'header\'); ?>__N____N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__        <main>__N__            <header class=\"site-header site-menu-header\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N__                        <div class=\"col-lg-10 col-12 mx-auto\">__N__                            <h1 class=\"text-white\">Les produits</h1>__N____N__                            <strong class=\"text-white\"__N__                                >Perfect for all Breakfast, Lunch and__N__                                Dinner</strong__N__                            >__N__                        </div>__N__                    </div>__N__                </div>__N____N__                <div class=\"overlay\"></div>__N__            </header>__N____N__            <section class=\"menu section-padding\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N__                        <div class=\"col-12\">__N__                            <h2 class=\"mb-lg-5 mb-4\">Caisses </h2>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-md-6 col-12\">__N__                            <div class=\"menu-thumb\">__N__                                <img__N__                                    src=\"image/Zai.tn/slide/Compte-Pro-Logiciel-de-caisse.jpg\"__N__                                    class=\"img-fluid menu-image\"__N__                                    alt=\"\"__N__                                />__N____N__                                <div__N__                                    class=\"menu-info d-flex flex-wrap align-items-center\"__N__                                >__N__                                    <h4 class=\"mb-0\">Fresh Start</h4>__N____N__                                    <span__N__                                        class=\"price-tag bg-white shadow-lg ms-4\"__N__                                        ><small>$</small>24.50</span__N__                                    >__N__                                </div>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-md-6 col-12\">__N__                            <div class=\"menu-thumb\">__N__                                <img__N__                                    src=\"image/Zai.tn/slide/Compte-Pro-Logiciel-de-caisse.jpg\"__N__                                    class=\"img-fluid menu-image\"__N__                                    alt=\"\"__N__                                />__N____N__                                <div__N__                                    class=\"menu-info d-flex flex-wrap align-items-center\"__N__                                >__N__                                    <h4 class=\"mb-0\">Baked Creamy</h4>__N____N__                                    <span__N__                                        class=\"price-tag bg-white shadow-lg ms-4\"__N__                                        ><small>$</small>16.50</span__N__                                    >__N__                                </div>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-lg-4 col-md-6 col-12\">__N__                            <div class=\"menu-thumb\">__N__                                <img__N__                                    src=\"image/Zai.tn/slide/Compte-Pro-Logiciel-de-caisse.jpg\"__N__                                    class=\"img-fluid menu-image\"__N__                                    alt=\"\"__N__                                />__N____N__                                <div__N__                                    class=\"menu-info d-flex flex-wrap align-items-center\"__N__                                >__N__                                    <h4 class=\"mb-0\">Burger Set</h4>__N____N__                                    <span__N__                                        class=\"price-tag bg-white shadow-lg ms-4\"__N__                                        ><small>$</small>24.50</span__N__                                    >__N____N__                                    <del class=\"ms-4\"__N__                                        ><small>$</small>36.50</del__N__                                    >__N__                                </div>__N__                            </div>__N__                        </div>__N__                    </div>__N__                </div>__N__            </section>__N____N__            <section class=\"menu section-padding bg-white\">__N__                <div class=\"container\">__N__                    <div class=\"row\">__N__                        <div class=\"col-12\">__N__                            <h2 class=\"mb-lg-5 mb-4\">Accessoires</h2>__N__                        </div>__N____N__                        <div class=\"col-lg-6 col-12\">__N__                            <div class=\"menu-thumb\">__N__                                <img__N__                                    src=\"image/Zai.tn/lunch/louis-hansel-cH5IPjaAYyo-unsplash.jpg\"__N__                                    class=\"img-fluid menu-image\"__N__                                    alt=\"\"__N__                                />__N____N__                                <div__N__                                    class=\"menu-info d-flex flex-wrap align-items-center\"__N__                                >__N__                                    <h4 class=\"mb-0\">Super Steak Set</h4>__N____N__                                    <span__N__                                        class=\"price-tag bg-white shadow-lg ms-4\"__N__                                        ><small>$</small>32.75</span__N__                                    >__N____N__                                    <del class=\"ms-4\"><small>$</small>55</del>__N__                                </div>__N__                            </div>__N__                        </div>__N____N__                        <div class=\"col-lg-6 col-12\">__N__                            <div class=\"menu-thumb\">__N__                                <img__N__                                    src=\"image/Zai.tn/lunch/louis-hansel-rheOvfxOlOA-unsplash.jpg\"__N__                                    class=\"img-fluid menu-image\"__N__                                    alt=\"\"__N__                                />__N____N__                                <div__N__                                    class=\"menu-info d-flex flex-wrap align-items-center\"__N__                                >__N__                                    <h4 class=\"mb-0\">Bread &amp; Steak Set</h4>__N____N__                                    <span__N__                                        class=\"price-tag bg-white shadow-lg ms-4\"__N__                                        ><small>$</small>42.50</span__N__                                    >__N__                                </div>__N__                            </div>__N__                        </div>__N__                    </div>__N__                </div>__N__            </section>__N____N__            __N__        </main>__N____N__</section>__N____N____N__<?php includeContainer(\'footer\'); ?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 88 -> 20__+MAX_llx_website_page__ - Aliases panier --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(20__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'panier', '', 'panier', 'panier', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-07 11:25:57', null, '', 'page', '', '<?php__N__// Inclure les fichiers nécessaires et démarrer la session__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__require_once $main_inc_path;__N__session_start();__N____N__// Vérifier la connexion de l\'utilisateur__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Obtenir l\'ID de l\'utilisateur__N__$user_id = $_SESSION[\'id\'];__N____N__// Initialiser le panier pour cet utilisateur s\'il n\'existe pas encore__N__if (!isset($_SESSION[\'panier\'][$user_id])) {__N__    $_SESSION[\'panier\'][$user_id] = [];__N__}__N____N__// Gérer la suppression d\'un produit du panier__N__if ($_SERVER[\'REQUEST_METHOD\'] === \'POST\' && isset($_POST[\'remove_product_id\'])) {__N__    $remove_product_id = intval($_POST[\'remove_product_id\']);__N__    foreach ($_SESSION[\'panier\'][$user_id] as $key => $item) {__N__        if ($item[\'id\'] === $remove_product_id) {__N__            unset($_SESSION[\'panier\'][$user_id][$key]);__N__            // Réindexer le tableau pour éviter les trous dans les indices__N__            $_SESSION[\'panier\'][$user_id] = array_values($_SESSION[\'panier\'][$user_id]);__N__            break;__N__        }__N__    }__N__}__N____N__// Vérifier si le product_id est passé en paramètre et est un entier valide__N__if (isset($_GET[\'product_id\']) && is_numeric($_GET[\'product_id\'])) {__N__    $product_id = intval($_GET[\'product_id\']);__N__    __N__    // Récupérer les détails du produit depuis la base de données__N__    $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"product WHERE rowid = \" . $product_id;__N__    $result = $db->query($sql);__N__    __N__    if ($result && $db->num_rows($result) > 0) {__N__        $product = $db->fetch_object($result);__N__        __N__        // Ajouter ou mettre à jour le produit dans le panier de l\'utilisateur (dans la session)__N__        $found = false;__N__        foreach ($_SESSION[\'panier\'][$user_id] as &$item) {__N__            if ($item[\'id\'] === $product_id) {__N__                // Incrémenter la quantité si le produit est déjà dans le panier__N__                $item[\'quantite\'] += 1;__N__                $found = true;__N__                break;__N__            }__N__        }__N__        __N__        if (!$found) {__N__            // Ajouter le produit avec une quantité initiale de 1__N__            $_SESSION[\'panier\'][$user_id][] = [__N__                \'id\' => $product->rowid,__N__                \'ref\' => $product->ref,__N__                \'label\' => $product->label,__N__                \'description\'=> $product->description,__N__                \'prix\' => $product->price,__N__                \'prixttc\' => $product->price_ttc,__N__                \'tva\' => $product->tva_tx,__N__                \'quantite\' => 1__N__            ];__N__        }__N__    }__N____N__    // Libérer le résultat de la requête__N__    $db->free($result);__N__}__N____N__// Ajout de la commande et des détails de la commande lorsque l\'utilisateur clique sur \"Valider la commande\"__N__if ($_SERVER[\'REQUEST_METHOD\'] === \'POST\' && isset($_POST[\'validate_command\'])) {__N__    // Date actuelle avec heure, minute et seconde__N__    $date = date(\'Y-m-d H:i:s\');__N____N__    // Extraire l\'année et le mois actuels__N__    $year_month = date(\'y\') . date(\'m\');__N____N__    // Récupérer le dernier numéro de commande du même mois et année depuis la base de données__N__    $sql = \"SELECT ref FROM \" . MAIN_DB_PREFIX . \"commande WHERE ref LIKE \'CO\" . $year_month . \"-%\' ORDER BY ref DESC LIMIT 1\";__N__    $result = $db->query($sql);__N____N__    if ($result && $db->num_rows($result) > 0) {__N__        $last_ref = $db->fetch_object($result)->ref;__N__        $last_num = intval(substr($last_ref, 9)); // Extraire le numéro à partir de la 10ème position__N__        $new_num = str_pad($last_num + 1, 4, \'0\', STR_PAD_LEFT); // Incrémenter et formater le numéro__N__    } else {__N__        $new_num = \'0001\'; // Commencer à 0001 si aucune commande n\'existe__N__    }__N____N__    // Générer la nouvelle référence de commande__N__    $ref = \'CO\' . $year_month . \'-\' . $new_num;__N____N__    // Calculer le total HT, TTC et la TVA de la commande__N__    $total_ht = 0;__N__    $total_ttc = 0;__N__    $total_tva = 0;__N__    foreach ($_SESSION[\'panier\'][$user_id] as $item) {__N__        $total_ht += $item[\'prix\'] * $item[\'quantite\'];__N__        $total_ttc += $item[\'prixttc\'] * $item[\'quantite\'];__N__        $total_tva += ($item[\'prixttc\'] - $item[\'prix\']) * $item[\'quantite\'];__N__    }__N____N__    // Insérer la commande dans la base de données Dolibarr__N__    $query_insert_commande = \"INSERT INTO \" . MAIN_DB_PREFIX . \"commande (__N__        ref, tms, date_creation, date_valid, total_tva, date_commande, total_ht, total_ttc, fk_soc, fk_statut, fk_incoterms, fk_multicurrency, multicurrency_code, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc,model_pdf,fk_input_reason) __N__        VALUES (__N__        \'$ref\', \'$date\', \'$date\', \'$date\', $total_tva, \'$date\', $total_ht, $total_ttc, $user_id, 1, 0, 0, \'TND\', $total_ht, $total_tva, $total_ttc,\'eratosthene\',12)\";__N__    __N__    $result_insert = $db->query($query_insert_commande);__N__if ($result_insert) {__N__    $commande_id = $db->last_insert_id(MAIN_DB_PREFIX . \'commande\');__N__    __N__    // Insérer les détails de la commande dans la base de données__N__    foreach ($_SESSION[\'panier\'][$user_id] as $item) {__N__        $total_ht_item = $item[\'prix\'] * $item[\'quantite\'];__N__        $total_ttc_item = $item[\'prixttc\'] * $item[\'quantite\'];__N__        $total_tva_item = ($item[\'prixttc\'] - $item[\'prix\']) * $item[\'quantite\'];__N__        $description = $item[\'description\']; // Utilisez le champ label comme description__N__        __N__        $query_insert_commande_det = \"INSERT INTO \" . MAIN_DB_PREFIX . \"commandedet (__N__            description, ref_ext, fk_commande, fk_product, qty, tva_tx, localtax1_type, localtax2_type, price, subprice, multicurrency_subprice, multicurrency_total_ht, rang, multicurrency_code, multicurrency_total_tva, multicurrency_total_ttc, total_ht, total_tva, total_ttc) __N__            VALUES (__N__            \'$description\', \'\', $commande_id, {$item[\'id\']}, {$item[\'quantite\']}, {$item[\'tva\']}, \'\', \'\', {$item[\'prix\']}, {$item[\'prix\']}, {$item[\'prix\']}, $total_ht_item, 1, \'TND\', $total_tva_item, $total_ttc_item, $total_ht_item, $total_tva_item, $total_ttc_item)\";__N__        $db->query($query_insert_commande_det);__N__    }__N____N__    // Vider le panier après validation de la commande__N__    unset($_SESSION[\'panier\'][$user_id]);__N__}__N__}__N____N__includeContainer(\'header\');__N____N__?>__N____N____N__<style>__N__    __N__    __N__    .panier-container {__N__        min-height: 91vh;__N__        width: 100%;__N__        position: relative;__N__        display: flex;__N__        flex-direction: column;__N__        align-items: center;__N__        padding: 4vh 0 4vh 0;__N__    }__N__    __N__    .title-sec {__N__        font-family: \"JetBrains Mono\", monospace;__N__        color: var(--color-third);__N__        text-transform: uppercase;__N__        letter-spacing: 2px;__N__        margin-bottom: 6vh !important;__N__        text-align: center;__N__    }__N__    __N__    .first-color {__N__        color: var(--color-first);__N__    }__N__    __N__    .cart-items .empty-cart {__N__        font-size: 26px;__N__        font-weight: 400;__N__        letter-spacing: 1px;__N__    } __N__    __N__    .cart-items {__N__        margin-bottom: 30px;__N__        display: grid;__N__        justify-items: stretch;__N__        grid-template-columns:  60% 40%;;__N__        width: 80%;__N__    }__N__    __N__    .panier-left {__N__        position: relative;__N__        display: flex;__N__        flex-direction: column;__N__        align-items: flex-end;__N__        width: 100%;__N__        gap: 35px;__N__        padding-right: 10%;__N__    }__N__    __N__    __N__    __N__    __N__    __N__    __N__    __N__    __N__    /* card */__N__    __N__    .card-product {__N__        position: relative;__N__        background: #ffffff;__N__        display: flex;__N__        width: 80%;__N__        height: auto;__N__        flex-direction: row;__N__        padding: 8px;__N__        border: solid 1px var(--color-first);__N__        border-radius: 24px;__N__        box-shadow: 0 3px 6px rgb(0 0 0 / 25%);__N__        gap: 18px;__N__        transition: .3s;__N__        will-change: transform;__N____N__    }__N__    __N__    /*.card-product:hover {*/__N__    /*    transform: scale(104%) translateY(-10px);*/__N__    /*    box-shadow: 0 8px 10px rgb(0 0 0 / 20%);*/__N__    /*}*/__N__    __N__    .card-product .container-card-image {__N__        position: relative;__N__        overflow: hidden;__N__        /*aspect-ratio: 1 / 1;*/__N__        width: 45%;__N__        height: 100%;__N__        border-radius: 16px;__N__        margin-bottom: 12px;__N__    }__N__    __N__    .container-card-image img {__N__        object-fit: cover;__N__        width: 100%;__N__        object-position: center;__N__        height: 100%;__N__    }__N__     __N__    .container-card-details{__N__        margin-left: 3px;__N__    }__N__    __N__    .cart-items .container-card-details  p{__N__        font-family: \"Roboto\", sans-serif !important;__N__        font-size: 26px;__N__        font-weight: 500;__N__        color: var(--color-third);__N__        letter-spacing: 1px;__N__    }__N__    __N__    .name-product {__N__        margin-bottom: 10px !important;__N__        font-size: 28px !important;__N__        color: var(--color-third) !important;__N__        font-weight: 500 !important;__N__    }__N__    __N__    __N__    __N__    .line-sep {__N__        position: relative;__N__        left: -11px;__N__        width: 40%;__N__        height: 1px;__N__        background: var(--color-first);__N__        margin: 3.5% 0;__N__    }__N__    __N__    .sala {__N__        position: absolute;__N__        bottom: 10px;__N__        right: 10px;__N__    }__N__     __N__    .circle-deco {__N__        width: 40px;__N__        height: 40px;__N__        background: var(--color-first);__N__        z-index: 2;__N__        border: none;__N__        color: #ffffff;__N__        border-radius: 50% !important;__N__        font-weight: 900;__N__        font-size: 25px !important;__N__        display: flex;__N__        padding-bottom: 2px !important;__N__        justify-content: center;__N__        will-change: transform;__N__        transition: .2s;__N__    }__N__    __N__    .circle-deco:hover {__N__        transform: scale(120%) rotate(90deg);__N__    }__N__    __N__    .total-card {__N__        position: relative;__N__        width: 360px;__N__        display: flex;__N__        flex-direction: column;__N__        border: solid 2px var(--color-first);__N__        border-radius: 24px;__N__        box-shadow: 0 4px 6px rgb(0 0 0 / 16%);__N__        overflow:hidden;__N__        display: flex;__N__        flex-direction: column;__N__        transition: .3s;__N__        will-change: transform;__N__    }__N__    __N__    .total-card:hover {__N__           transform: scale(102%);__N__    }__N__    .total-card:hover .total-card-title {__N__        background: #4e82cf;__N__    }__N__    __N__    __N__    __N__    __N__    __N__    __N__    .panier-right {__N__        display: flex;__N__        position: relative;__N__        flex-direction: column;__N__        gap: 24px;__N__        width: 75%;__N__        align-items: center;__N__    }__N__    __N__    __N__    .total-card-title {__N__        position: relative;__N__        background: var(--color-first);__N__        padding: 8px 16px;__N__        transition: .3s;__N__    }__N__    __N__    .total-card h5 {__N__        text-align: center;__N__        color : #ddeaff;__N__    }__N__    __N__    .total-card-price {__N__        position: relative;__N__        width: 100%;__N__        height: 100%;__N__        padding: 18px;__N__    }__N__    __N__    .total-card-price p {__N__        font-family: \"Roboto\", sans-serif;__N__        font-size: 26px;__N__        color: var(--color-third);__N__        font-weight: 500;__N__        margin-bottom: 1.1vh;__N__    }__N__    __N__    .total-card-price b {__N__        margin-right: 14px;__N__        font-weight: 500;__N__        color: var(--color-first);__N__    }__N__    __N__    .total-card-price .line {__N__        position: relative;__N__        height: 1px;__N__        width: 35%;__N__        background: var(--color-first);__N__        right: -18px;__N__    }__N__    __N__    .detail-container {__N__        display: flex;__N__        flex-direction: column;__N__        align-items: flex-end;__N__        gap: 10px;__N__    }__N__    __N__    .more-details {__N__        font-size: 20px !important;__N__        color: var(--color-first) !important;__N__        transition: .3s;__N__    }__N__    __N__    .more-details:hover {__N__        color: black;__N__        letter-spacing: 1px;__N__    }__N__    __N__    .light-ht {__N__        font-weight: 300 !important;__N__        font-size: 22px !important;__N__        margin-bottom: 1.4vh !important;__N__    }__N__    .light-ht b{__N__        font-weight: 400 !important;__N__    }__N__    __N__    __N__    .valider-com {__N__    text-transform: uppercase !important;__N__    font-size: 20px !important;__N__    color: var(--color-second) !important;__N__    border: none !important;__N__    padding: 10px 16px !important;__N__    display: flex !important;__N__    align-items: center;__N__    font-weight: 600;__N__    gap: 6px;__N__    background: var(--color-first);__N__    letter-spacing: 1px;__N__    font-family: \"Roboto\", sans-serif !important;__N__    border-radius: 16px !important;__N__    transition: .4s;__N__    will-change: transform;__N__    box-shadow: 0 4px 6px rgb(0, 0, 0, 25%);__N__    }__N__    .valider-com:hover {__N__    transform: scale(105%);__N__    color: var(--color-first) !important;__N__    background: #9ab4d1;__N__    }__N__    __N__    __N__</style>__N____N____N____N____N__    __N__<main>__N__    <div class=\"panier-container\">__N__        __N__    <div>__N__        <h2 class=\"title-sec\"><span class=\"first-color\">Panier</span> d\'achat</h2>__N__    </div>__N____N__        __N__        <section class=\"cart-items\">__N__        __N__            <div class=\"panier-left\">__N__            __N__            <?php if (isset($_SESSION[\'panier\'][$user_id]) && count($_SESSION[\'panier\'][$user_id]) > 0): ?>__N__                <?php foreach ($_SESSION[\'panier\'][$user_id] as $item): ?>__N__                    <div class=\"card-product\">__N__                        <div class=\"container-card-image\"  container-card-image>__N__                            <img src=\"image/__WEBSITE_KEY__/logiciel_caisse_magasin.jpg\" alt=\"<?php echo htmlspecialchars($item[\'label\']); ?>\">__N__                        </div>__N__                        __N__                        __N__                        <div class\"container-card-details\">__N__                            __N__                        <div class=\"item-details\">__N__                            <p class=\"name-product\"><?php echo htmlspecialchars($item[\'ref\']) . \" \" . htmlspecialchars($item[\'label\']); ?></p>__N__                            <p>Prix : <?php echo number_format($item[\'prix\'], 3, \',\', \' \'); ?> TND</p>__N__                            <p>Prix TTC : <?php echo number_format($item[\'prixttc\'], 3, \',\', \' \'); ?> TND</p>__N__                            <p>TVA : <?php echo number_format($item[\'tva\'], 2, \',\', \' \'); ?>%</p>__N____N__                            <div class=\"quantity\">__N__                                <button class=\"decrement\">-</button>__N__                                <input type=\"number\" value=\"<?php echo htmlspecialchars($item[\'quantite\']); ?>\" min=\"1\">__N__                                <button class=\"increment\">+</button>__N__                            </div>__N____N__                             <!--Formulaire pour supprimer le produit -->__N__                            <form method=\"POST\" action=\"\">__N__                                <input type=\"hidden\" name=\"remove_product_id\" value=\"<?php echo htmlspecialchars($item[\'id\']); ?>\">__N__                                <button type=\"submit\">Supprimer</button>__N__                            </form>__N__                        </div>__N__                            __N__                    </div>__N__                    </div>__N__                <?php endforeach; ?>__N____N__                 <!--ICI-->__N__            <?php else: ?>__N__                <p class=\"empty-cart\">Votre panier est vide.</p>__N__            <?php endif; ?>__N__            __N__            __N__            </div>__N__            __N__            __N__            <div class=\"panier-right\">__N__                <div class=\"total-card\">__N__                    <div class=\"total-card-title\">__N__                        <h5>Total des commandes</h3>__N__                    </div>__N__                    <div class=\"total-card-price\">__N__                        <p><b>Total TTC</b><?php echo number_format($total_ttc_sum_propal, 3, \',\', \' \'); ?> TND</p>__N__                        <p class=\"light-ht\"><b>Total HT</b><?php echo number_format($total_ht_sum_propal, 3, \',\', \' \'); ?> TND</p>__N__                        <!--<div class=\"detail-container\">-->__N__                        <!--    <div class=\"line\"></div>-->__N__                        <!--    <a href=\"\" class=\"more-details\">Plus de détails</a>-->__N__                        <!--</div>-->__N__                    </div>__N__                </div>__N__                            <!--Formulaire pour valider la commande -->__N__                <form method=\"POST\" action=\"\">__N__                    <button type=\"submit\" name=\"validate_command\" class=\"checkout valider-com\">Valider la commande</button>__N__                </form>__N__            </div>__N__            __N__        </section>__N__        __N__        __N__        __N__    </div>__N__</main>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 154 -> 21__+MAX_llx_website_page__ - Aliases product_page --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(21__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'product_page', '', 'product_page', '', '', '', '', '1', '2024-08-01 16:26:45', '2024-08-02 04:40:39', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N__<div class=\"head-content<?php echo ($websitepage->ref == \'index\' ? \' head-abso\' : \'\'); ?>\" >__N__    __N__    <?php includeContainer(\'header\'); __N__    $link_to_page = dol_buildpath(\'Panier.php\', 1);__N__    ?>__N__    __N__</div>__N____N__<style>__N__    .head-content {__N__    position: relative;__N__    top: 0;__N__    width: 100%;__N__    z-index: 100;__N__    }__N____N__    .head-abso {__N__    position: absolute !important;__N__    }__N__    __N__    __N__    .landing-hero {__N__        position: relative;__N__        width: 100%;__N__        height: 100vh;__N__        background: linear-gradient(0deg, rgb(139, 152, 167) 0%, rgba(38, 60, 92, 1) 100%);__N__    }__N__    __N__    .hero-grid-container {__N__        position: relative;__N__        height:100%;__N__        display: grid;__N__        grid-template-columns: 1fr 1fr;__N__        align-content: center;__N__        margin: 0 5% ;__N__        justify-items: center;__N__    }__N__    __N__    .LEFT-SIDE {__N__        display: flex ;__N__        flex-direction: column;__N__        align-items: flex-start;__N__        justify-content: center;__N__        gap: 50px;__N__    }__N__    __N__    .LEFT-SIDE h1 {__N__        font-family: \"JetBrains Mono\", monospace;__N__        font-size: 78px;  __N__        color: var(--color-second);__N__        text-transform: uppercase;__N__        letter-spacing: 4px;__N__    }__N__    __N__    .LEFT-SIDE h1 span {__N__        color: var(--color-first); __N__    }__N__    __N__    __N__    .LEFT-SIDE button  {__N__        position: relative;__N__        display: flex;__N__        color: var(--color-first);__N__        background: var(--color-second);__N__        border: solid 1px var(--color-first);__N__        border-radius: 16px;__N__        padding: 5px 6px;__N__        align-items: center;__N__        font-size: 32px;__N__        text-transform: uppercase;__N__        font-family: \"Roboto\", sans-serif;__N__        font-weight: 800;__N__        letter-spacing: 1px;__N__        gap: 8px;__N__        margin-left: 10px;__N__    }__N__    __N__    .LEFT-SIDE button span {__N__        background: var(--color-first);__N__        color: var(--color-second);__N__        padding: 12px 24px;__N__        border-radius: 13px;__N__        transition: .4s;__N__        z-index: 2;__N__    }__N__    __N__    .LEFT-SIDE button:hover span{__N__        transform: translateX(83px);__N__    }__N__    __N__    .LEFT-SIDE button:hover .btn-none {__N__         opacity: .9;__N__    }__N____N__    .btn-none {__N__        position: absolute;__N__        position: absolute;__N__        font-size: 54px;__N__        left: 19px;__N__        z-index: 1;__N__        opacity: 0;__N__        transition: .4s;__N__    }__N__    __N__    __N__    .RIGHT-SIDE img{__N__        width: 90%;__N__    }__N__    .RIGHT-SIDE{__N__        display: flex;__N__        justify-content: flex-end;__N__    }__N__    __N__    __N__    .scroll-down {__N__        position:absolute;__N__        bottom: -2vh;__N__        width: 65PX;__N__        height: 210px;__N__        right: -45px;__N__    }__N__    __N__    .first-color {__N__        color: var(--color-first);__N__    }__N__    __N__    __N__    __N__    __N__    __N__    __N__    __N__    .title-sec {__N__        font-family: \"JetBrains Mono\", monospace;__N__        color: var(--color-third);__N__        text-transform: uppercase;__N__        letter-spacing: 2px;__N__        margin-bottom: 6vh !important;__N__        text-align: center;__N__    }__N__    __N__    __N__    .container-product-shop  {__N__        display: flex;__N__        justify-content: center;__N__        flex-wrap: wrap;__N__        gap: 56px;__N__    }__N__    __N__    .card-product {__N__        position: relative;__N__        background: #ffffff;__N__        display: flex;__N__        width: 400px;__N__        height:auto;__N__        flex-direction: column;__N__        padding: 8px;__N__        border: solid 1px var(--color-first);__N__        border-radius: 24px;__N__        box-shadow: 0 3px 6px rgb(0 0 0 / 25%);__N__        gap: 18px;__N__        transition: .3s;__N__        will-change: transform; /* cancel the noise effect */__N____N__    }__N__    __N__    .card-product:hover {__N__        transform: scale(104%) translateY(-10px);__N__        box-shadow: 0 8px 10px rgb(0 0 0 / 20%);__N__    }__N__    __N__    .card-product .container-card-image {__N__        position: relative;__N__        overflow: hidden;__N__        aspect-ratio: 1 / 1;__N__        width: 100%;__N__        height:270px;__N__        border-radius: 16px;__N__        margin-bottom: 12px;__N__    }__N__    __N__    .container-card-image img {__N__        object-fit: cover;__N__        width: 100%;__N__        object-position: center;__N__        height: 100%;__N__    }__N__    __N__    .container-card-details{__N__        margin-left: 3px;__N__    }__N__    .container-card-details  p{__N__        font-family: \"Roboto\", sans-serif !important;__N__        font-size: 26px;__N__        font-weight: 500;__N__        color: var(--color-third);__N__        letter-spacing: 1px;__N__    }__N__    __N__    .name-product {__N__        margin: 0 !important;__N__    }__N__    .price-product {__N__        margin-bottom: 4px !important;__N__    }__N__    __N__    __N__    .line-sep {__N__        position: relative;__N__        left: -11px;__N__        width: 40%;__N__        height: 1px;__N__        background: var(--color-first);__N__        margin: 3.5% 0;__N__    }__N__    __N__    .sala {__N__        position: absolute;__N__        bottom: 10px;__N__        right: 10px;__N__    }__N__     __N__    .circle-deco {__N__        width: 40px;__N__        height: 40px;__N__        background: var(--color-first);__N__        z-index: 2;__N__        border: none;__N__        color: #ffffff;__N__        border-radius: 50% !important;__N__        font-weight: 900;__N__        font-size: 25px !important;__N__        display: flex;__N__        padding-bottom: 2px !important;__N__        justify-content: center;__N__        will-change: transform;__N__        transition: .2s;__N__    }__N__    __N__    .circle-deco:hover {__N__        transform: scale(120%) rotate(90deg);__N__    }__N__    __N____N__    __N__    .landing-hero.index {__N__        background: transparent ;__N__        position: relative !important;__N__        height: 75vh;__N__        /*background-size: cover;*/__N__        box-shadow: 0px 4px 6px rgb(0 0 0 / 24%);__N__    }__N__    __N__    .landing-hero.index .hero-grid-container  {__N__        grid-template-columns: 30% 70%;__N__        justify-items: end;__N__    }__N__    __N__    __N__    .splide__slide img {__N__        height: 102% !important;__N__        width: 100%;__N__        object-fit: cover;__N__        object-position: center;__N__    }__N__    __N__    .splide__arrow {__N__        background: transparent;__N__    }__N__    __N__    .splide__arrow svg {__N__        fill: var(--color-second);__N__        height: 2.2em;__N__        width: 2.2em;__N__    }__N__    .splide__pagination {__N__        gap: 16px;__N__    }__N__    __N__    .splide__pagination__page {__N__        width: 40px !important;__N__        border-radius: 24px !important;__N__        height: 2px !important;__N__        background: #919191!important;__N__    }__N__    .splide__pagination__page.is-active {__N__        background: #000000 !important;__N__    }__N__    __N__    .landing-hero.index .LEFT-SIDE {__N__        gap: 0px;__N__    }__N__    __N__    .landing-hero.index .hero-grid-container.index{__N__        position: absolute;__N__        top: 0;__N__        left: 0;__N__        display: flex;__N__        align-items: center;__N__        width: 100%;__N__        margin: 0;__N__        padding: 0 5%;__N__        justify-content: flex-end;__N__        background: linear-gradient(270deg, rgba(38,60,92,98%) 42%, rgba(0,0,0,0.052258403361344574) 100%);__N____N__    }__N__    __N__    .landing-hero.index .hero-grid-container.index h2 {__N__        font-size: 72px;__N__        letter-spacing: 8px;__N__        font-family: \"Roboto\", sans-serif !important;__N__        text-align: right;__N__        margin-bottom: 5px;__N__        color: #ffffff;__N__        animation: letterSpacingAnimation 4s infinite;__N__    }__N__    __N__    .landing-hero.index .hero-grid-container.index h3 {__N__        font-size: 32px;__N__        font-family: \"Roboto\", sans-serif !important;__N__        letter-spacing: 6px;__N__        text-align: right;__N__        font-weight: 300;__N__        color: #ffffff;__N__        animation: letterSpacingAnimation2 4.25s infinite;__N__    }__N__    __N__    .name-title {__N__        display: flex;__N__        flex-direction: column;__N__        gap: 12px;__N__    }__N__    __N__    .align-left {__N__        text-align: left;__N__        letter-spacing: 1px !important;__N__    }__N__    __N__    .container-card-image.categories-image {__N__        height: 323px;__N__        border-radius: 16px 16px 8px 8px;__N__    }__N__    .container-card-image.categories-image img {__N__        transition: .4s;__N__        height: 105%;__N__    }__N__    .card-product:hover .container-card-image.categories-image img{__N__        transform: scale(105%);__N__    }__N__    __N__    __N__    .container-card-details.categories-name {__N__        display: flex;__N__        flex-direction: row;__N__        align-items: center;__N__        justify-content: space-between;  __N__        padding: 0 5px;__N__    }__N__    __N__    __N__    .container-card-details.categories-name i { __N__        font-size: 23px;__N__        margin-right: 4px;__N__        color: var(--color-first);__N__    }__N__    .card-product.categories-card {__N__        padding-bottom: 10px;__N__        width: 508px;__N__    }__N____N__    .line-sep.home {__N__        position: relative;__N__        width: 35%;  __N__        height: 2px;__N__        background: var(--color-first);__N__        margin: 5.5% 0 0 0 !important;__N__    }__N__    __N__    __N__    __N__    .details-grid {__N__        position: relative;__N__        display: grid;__N__        width: 100%;__N__        grid-template-columns: 1fr 1fr;__N__        justify-items: end;__N__        gap: 40px;__N__    }__N____N____N__    .details-image {__N__        position: relative;__N__        width: 70%;__N__        height: 100%;__N__        overflow: hidden;    __N__    }__N__    .details-image img {__N__        width: 100%;__N__        height: 100%;__N__        object-fit: cover;__N__        object-position: center;__N__    }__N__    __N__    .details-text {__N__        position: relative;__N__        display: flex;__N__        width: 100%;__N__        /*gap: 6%;*/__N__        flex-direction: column;__N__        align-items: flex-start;__N__    }__N__    __N__    p.details-name {__N__        font-family: \"Roboto\", sans-serif;__N__        color: var(--color-first);__N__        letter-spacing: 2px;__N__        font-size: 52px;__N__        font-weight: 400;__N__    }__N__    __N__    __N__    p.details-price {__N__        font-size: 30px;__N__        font-weight: 400;__N__        letter-spacing: 2px;__N__        color: #00000094;__N__        font-family: \"Roboto\", sans-serif;__N__    }__N__    __N__    __N__    __N__    p.details-desc {__N__        width: 85%;__N__        font-family: \"Roboto\", sans-serif;__N__        font-size: 23px;__N__        line-height: 36px;__N__        color: var(--color-third);__N__        letter-spacing: 1px;__N__        text-align: justify;__N__    }__N____N__    .line-sep.details {__N__        left: 0;__N__        margin: 1.5% 0 6.5% 0px;__N__    }__N__    __N__    .normaldzq.details {__N__        margin-bottom: 28px !important;__N__        padding: 18px 16px !important;__N__        color: var(--color-second) !important;__N__        background: var(--color-first);__N__        box-shadow: 0 4px 6px rgb(0,0,0, 20%);__N__    }__N__    .normaldzq.details:hover {__N__        color: var(--color-first) !important;__N__        background: var(--color-second);__N__        box-shadow: 0 6px 8px rgb(0,0,0, 18%);__N__    }__N__    __N__    __N__</style>__N____N____N__<?php __N__    $product_id = htmlspecialchars($_GET[\'product_id\']);__N__    __N____N__?>__N____N____N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__        <main>__N__            __N__             <section class=\"menu section-padding\" id=\"cat_caisses\" style=\"background: var(--color-second); padding-bottom: 16vh; min-height: 87vh;\">__N__                <div class=\"container-section\" style=\"margin: 0 3%;\">__N__                    <h2 class=\"title-sec\" style=\"margin-bottom: 9vh !important;\"><span class=\"first-color\">DÉTAILS</h2>__N__                    __N__                    __N__                    <div class=\"container-product-shop\">__N__                        __N__                        <?php __N__                            global $db;__N__                            __N__                            // Requête de l\'information de product_id__N__                            $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"product WHERE rowid = \" . $product_id;__N__                            $result = $db->query($sql);__N__                        ?>__N__                        __N__                        <?php if($result) : ?>__N__                        __N__                            <!-- Boucle pour afficher chaque produit-->__N__                            __N__                            <?php while ($row = $db->fetch_object($result)) : ?>__N__                            __N__                            <div class=\"details-container\">__N__                                __N__                                <div class=\"details-grid\">__N__                                    <div class=\"details-image\">__N__                                        <img src=\"image/__WEBSITE_KEY__/logiciel_caisse_magasin.jpg\" alt=\"Produit\" loading=\"lazy\"/>__N__                                    </div>__N__                                    <div class=\"details-text\">__N__                                        <p class=\"details-name\"><?php echo htmlspecialchars($row->label); ?></p>__N__                                        <!--<div class=\"line-sep home\"></div>-->__N__                                        <p class=\"details-price\"><?php echo number_format($row->price, 3, \',\', \'\'); ?> TND</p>__N__                                        <div class=\"line-sep details\"></div>__N__                                        <a href=\"<?php echo htmlspecialchars($link_to_page . \'?product_id=\' . $row->rowid); ?>\">__N__                                            <button class=\"normaldzq details\"><i class=\'bx bx-cart-add\' style=\"font-size: 24px; !important\"></i>Ajouter au panier </button>__N__                                        </a>__N__                                        <p class=\"details-desc\">Le lorem ipsum est, en imprimerie, une suite de mots sans signification utilisée à titre provisoire pour calibrer une mise en page, le texte définitif venant remplacer le faux-texte dès qu\'il est prêt ou que la mise en page est achevée. Généralement, on utilise un texte en faux latin, le Lorem ipsum ou Lipsum</p>__N__                                        <!--<p class=\"details-desc\"><?php echo htmlspecialchars($row->description); ?></p>-->__N__                                    </div>__N__                                </div>__N__            __N__                            </div>__N__                        __N__                        __N__                            <?php endwhile; ?>__N__                            __N__                            <!--PAS DE PRODUIT DANS LA DB-->__N__                            <?php else : ?>__N__                            __N__                                <div class=\'col-12\'>__N__                                    <p>Aucun produit trouvé.</p>__N__                                </div>__N__                                __N__                        <?php endif; ?>__N__                </div>__N__                </div>__N__                __N__            </section>__N__            __N__        </main>__N____N__</section>__N____N____N__<?php includeContainer(\'footer\'); ?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 89 -> 22__+MAX_llx_website_page__ - Aliases produit --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(22__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'produit', '', 'produit', 'produit', '', '', '', '1', '2024-07-08 13:19:57', '2024-07-30 20:51:23', null, '', 'page', '', '<!-- Enter here your HTML content. Add a section with an id tag and tag contenteditable=\"true\" if you want to use the inline editor for the content  -->__N____N__<?php includeContainer(\'header\'); __N__$link_to_page = dol_buildpath(\'Panier.php\', 1);__N____N__?>__N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <header class=\"site-header site-menu-header\">__N__            <div class=\"container\">__N__                <div class=\"row\">__N__                    <div class=\"col-lg-10 col-12 mx-auto\">__N__                        <h1 class=\"text-white\">Les produits</h1>__N__                        <strong class=\"text-white\">Zai Le 1er Fournisseur des solutions Caisses en Tunisie</strong>__N__                    </div>__N__                </div>__N__            </div>__N__            <div class=\"overlay\"></div>__N__        </header>__N____N__        <section class=\"menu section-padding\">__N__            <div class=\"container\">__N__                <div class=\"row\">__N__                    <div class=\"col-12\">__N__                        <h2 class=\"mb-lg-5 mb-4\">Caisses</h2>__N__                    </div>__N____N__                    <?php__N__                    // Connexion à la base de données__N__                    global $db;__N____N__                    // Requête SQL pour obtenir tous les produits__N__                    $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"product\";__N__                    $result = $db->query($sql);__N____N__                    if ($result) {__N__                        // Boucle pour afficher chaque produit__N__                        while ($row = $db->fetch_object($result)) {__N__                            ?>__N__                            <div class=\"col-lg-4 col-md-6 col-12\">__N__                                <div class=\"menu-thumb\">__N__                                    <img__N__                                        src=\"image/Zai.tn/breakfast/logiciel_caisse_magasin.jpg\"__N__                                        class=\"img-fluid menu-image\"__N__                                        alt=\"\"__N__                                    />__N__                                    <div class=\"menu-info d-flex flex-wrap align-items-center\">__N__                                        <h4 class=\"mb-0\"><?php echo htmlspecialchars($row->label); ?></h4>__N__                                        <span class=\"price-tag bg-white shadow-lg ms-4\">__N__                                            <small><?php echo number_format($row->price, 2, \',\', \'\'); ?> TND</small>__N__                                        </span>__N__                                         <a href=\"<?php echo htmlspecialchars($link_to_page . \'?product_id=\' . $row->rowid); ?>\" class=\"butAction ms-4\">ajouter au panier</a>__N____N__                                    </div>__N__                                </div>__N__                            </div>__N__                            <?php__N__                        }__N__                    } else {__N__                        echo \"<div class=\'col-12\'><p>Aucun produit trouvé.</p></div>\";__N__                    }__N__                    ?>__N__                </div>__N__            </div>__N__        </section>__N____N__        <section class=\"menu section-padding bg-white\">__N__            <div class=\"container\">__N__                <div class=\"row\">__N__                    <div class=\"col-12\">__N__                        <h2 class=\"mb-lg-5 mb-4\">Accessoires</h2>__N__                    </div>__N____N__                    <?php__N__                    // Connexion à la base de données__N__                    global $db;__N____N__                    // Requête SQL pour obtenir tous les produits__N__                    $sql = \"SELECT * FROM \" . MAIN_DB_PREFIX . \"product\";__N__                    $result = $db->query($sql);__N____N__                    if ($result) {__N__                        // Boucle pour afficher chaque produit__N__                        while ($row = $db->fetch_object($result)) {__N__                            ?>__N__                          <div class=\"col-lg-6 col-12\">__N__    <div class=\"menu-thumb\">__N__        <img__N__            src=\"image/Zai.tn/lunch/louis-hansel-cH5IPjaAYyo-unsplash.jpg\"__N__            class=\"img-fluid menu-image\"__N__            alt=\"<?php echo htmlspecialchars($row->label); ?>\"__N__        />__N__        <div class=\"menu-info d-flex flex-wrap align-items-center\">__N__            <h4 class=\"mb-0\"><?php echo htmlspecialchars($row->label); ?></h4>__N__            <span class=\"price-tag bg-white shadow-lg ms-4\">__N__                <small><?php echo number_format($row->price, 2, \',\', \'\'); ?> TND</small>__N__            </span>__N__            <a href=\"<?php echo htmlspecialchars($link_to_page . \'?product_id=\' . $row->rowid); ?>\" class=\"butAction ms-4\">ajouter au panier</a>__N__            <del class=\"ms-4\"><small>$</small>55</del>__N__        </div>__N__    </div>__N__</div>__N____N__                            <?php__N__                        }__N__                    } else {__N__                        echo \"<div class=\'col-12\'><p>Aucun produit trouvé.</p></div>\";__N__                    }__N__                    ?>__N__                </div>__N__            </div>__N__        </section>__N__    </main>__N__</section>__N____N__<?php includeContainer(\'footer\'); ?>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 90 -> 23__+MAX_llx_website_page__ - Aliases profil --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(23__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'profil', '', 'profil', 'profil', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-12 11:06:33', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__// Démarrer la session__N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__// Vérifier la connexion à la base de données__N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Récupérer les détails de la société__N__    $query_societe = \"SELECT nom, email, phone, address, zip, town, logo FROM \" . MAIN_DB_PREFIX . \"societe WHERE rowid = \" . intval($societe_id);__N__    $result_societe = $db->query($query_societe);__N____N__    if ($result_societe && $db->num_rows($result_societe) > 0) {__N__        $row_societe = $db->fetch_object($result_societe);__N__        $societe_nom = $row_societe->nom;__N__        $societe_email = $row_societe->email;__N__        $societe_phone = $row_societe->phone;__N__        $societe_address = $row_societe->address;__N__        $societe_zip = $row_societe->zip;__N__        $societe_town = $row_societe->town;__N__        $societe_logo = $row_societe->logo;__N____N__        $logo_path = \'/viewimage.php?modulepart=societe&file=\' . $societe_id . \'/\' . $societe_logo;__N____N__    } else {__N__        echo \"Société non trouvée.\";__N__        exit;__N__    }__N____N__    // Calculer la somme totale des propositions commerciales__N__    $query_total_ttc_propal = \"SELECT SUM(total_ttc) AS total_ttc_sum_propal, SUM(total_ht) AS total_ht_sum_propal FROM \" . MAIN_DB_PREFIX . \"propal WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_ttc_propal = $db->query($query_total_ttc_propal);__N__    $total_ttc_sum_propal = 0;__N__    $total_ht_sum_propal = 0;__N____N__    if ($result_total_ttc_propal && $db->num_rows($result_total_ttc_propal) > 0) {__N__        $row_total_ttc_propal = $db->fetch_object($result_total_ttc_propal);__N__        $total_ttc_sum_propal = $row_total_ttc_propal->total_ttc_sum_propal;__N__        $total_ht_sum_propal = $row_total_ttc_propal->total_ht_sum_propal;__N__    }__N____N__    // Calculer la somme totale des factures clients sauf celles avec fk_statut = 0__N__   /* $query_total_factures = \"SELECT SUM(total_ttc) AS total_ttc_sum_factures, SUM(total_ht) AS total_ht_sum_factures FROM \" . MAIN_DB_PREFIX . \"facture WHERE fk_soc = \" . intval($societe_id) . \" AND fk_statut != 0\";__N__    $result_total_factures = $db->query($query_total_factures);__N__    $total_ttc_sum_factures = 0;__N__    $total_ht_sum_factures = 0;__N____N__    if ($result_total_factures && $db->num_rows($result_total_factures) > 0) {__N__        $row_total_factures = $db->fetch_object($result_total_factures);__N__        $total_ttc_sum_factures = $row_total_factures->total_ttc_sum_factures;__N__        $total_ht_sum_factures = $row_total_factures->total_ht_sum_factures;__N__    }__N__    */__N__    $query_total_factures = \"SELECT __N__                            SUM(total_ttc) AS total_ttc_sum_factures, __N__                            SUM(total_ht) AS total_ht_sum_factures __N__                         FROM \" . MAIN_DB_PREFIX . \"facture __N__                         WHERE fk_soc = \" . intval($societe_id) . \" __N__                           AND fk_statut != 0__N__                           AND type != 3\";__N__$result_total_factures = $db->query($query_total_factures);__N____N__$total_ttc_sum_factures = 0;__N__$total_ht_sum_factures = 0;__N____N__if ($result_total_factures) {__N__    $data = $result_total_factures->fetch_assoc();__N__    $total_ttc_sum_factures = $data[\'total_ttc_sum_factures\'] ? $data[\'total_ttc_sum_factures\'] : 0;__N__    $total_ht_sum_factures = $data[\'total_ht_sum_factures\'] ? $data[\'total_ht_sum_factures\'] : 0;__N__}__N____N____N__    // Calculer la somme totale des commandes__N__    $query_total_commandes = \"SELECT SUM(total_ttc) AS total_ttc_sum_commandes, SUM(total_ht) AS total_ht_sum_commandes FROM \" . MAIN_DB_PREFIX . \"commande WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_commandes = $db->query($query_total_commandes);__N__    $total_ttc_sum_commandes = 0;__N__    $total_ht_sum_commandes = 0;__N____N__    if ($result_total_commandes && $db->num_rows($result_total_commandes) > 0) {__N__        $row_total_commandes = $db->fetch_object($result_total_commandes);__N__        $total_ttc_sum_commandes = $row_total_commandes->total_ttc_sum_commandes;__N__        $total_ht_sum_commandes = $row_total_commandes->total_ht_sum_commandes;__N__    }__N____N__    // Calculer le total des tickets__N__    $query_total_tickets = \"SELECT COUNT(*) AS total_count_ticket FROM \" . MAIN_DB_PREFIX . \"ticket WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_tickets = $db->query($query_total_tickets);__N__    $total_count_ticket = 0;__N____N__    if ($result_total_tickets && $db->num_rows($result_total_tickets) > 0) {__N__        $row_total_tickets = $db->fetch_object($result_total_tickets);__N__        $total_count_ticket = $row_total_tickets->total_count_ticket;__N__    }__N____N__    // Calculer les créances__N__    $sql = \"SELECT f.rowid AS facture_id, f.ref, f.datec, f.date_lim_reglement, f.total_ht, f.total_tva, f.total_ttc, f.multicurrency_total_ttc, f.fk_statut, f.type, f.paye,__N__                   (SELECT SUM(pf.amount) FROM \" . MAIN_DB_PREFIX . \"paiement_facture pf WHERE pf.fk_facture = f.rowid) AS total_amount_recu__N__            FROM \" . MAIN_DB_PREFIX . \"facture f__N__            WHERE f.fk_soc = \" . intval($societe_id);__N__    $total_ht_sum = 0;__N__    $total_tva_sum = 0;__N__    $total_ttc_sum = 0;__N__    $total_recu_sum = 0;__N__    $total_creance_sum = 0;__N____N__    // Exécuter la requête pour calculer les créances__N__    $result = $db->query($sql);__N__    if ($result) {__N__        while ($row = $db->fetch_object($result)) {__N__            $total_ht_sum += $row->total_ht;__N__            $total_tva_sum += $row->total_tva;__N__            $total_ttc_sum += $row->total_ttc;__N__            $total_recu_sum += $row->total_amount_recu;__N__        }__N__        $total_creance_sum = $total_ttc_sum - $total_recu_sum;__N__    }__N____N__    // Calculer les acomptes restants__N__    $query_acomptes = \"SELECT SUM(amount_ttc) AS total_acomptes__N__                       FROM \" . MAIN_DB_PREFIX . \"societe_remise_except__N__                       WHERE fk_facture IS NULL AND fk_facture_source IN (__N__                           SELECT rowid FROM \" . MAIN_DB_PREFIX . \"facture__N__                           WHERE fk_soc = \" . intval($societe_id) . \" AND type = 3__N__                       )\";__N__    $result_acomptes = $db->query($query_acomptes);__N__    $total_acomptes = 0;__N____N__    if ($result_acomptes && $db->num_rows($result_acomptes) > 0) {__N__        $row_acomptes = $db->fetch_object($result_acomptes);__N__        $total_acomptes = $row_acomptes->total_acomptes;__N__    }__N____N__    // Calculer les avoirs restants__N__    $query_avoirs = \"SELECT SUM(amount_ttc) AS total_avoirs__N__                     FROM \" . MAIN_DB_PREFIX . \"societe_remise_except__N__                       WHERE fk_facture IS NULL AND fk_facture_source IN (__N__                         SELECT rowid FROM \" . MAIN_DB_PREFIX . \"facture__N__                         WHERE fk_soc = \" . intval($societe_id) . \" AND type = 2__N__                     )\";__N__    $result_avoirs = $db->query($query_avoirs);__N__    $total_avoirs = 0;__N____N__    if ($result_avoirs && $db->num_rows($result_avoirs) > 0) {__N__        $row_avoirs = $db->fetch_object($result_avoirs);__N__        $total_avoirs = $row_avoirs->total_avoirs;__N__    }__N____N__    // Calculer les acomptes utilisés__N__    $query_acomptes_utilises = \"SELECT SUM(amount_ttc) AS total_acomptes_utilises__N__                                FROM \" . MAIN_DB_PREFIX . \"societe_remise_except__N__                       WHERE fk_facture IS NOT NULL AND fk_facture_source IN (__N__                         SELECT rowid FROM \" . MAIN_DB_PREFIX . \"facture__N__                         WHERE fk_soc = \" . intval($societe_id) . \" AND type = 3__N__                     )\";__N__    $result_acomptes_utilises = $db->query($query_acomptes_utilises);__N__    $total_acomptes_utilises = 0;__N____N__    if ($result_acomptes_utilises && $db->num_rows($result_acomptes_utilises) > 0) {__N__        $row_acomptes_utilises = $db->fetch_object($result_acomptes_utilises);__N__        $total_acomptes_utilises = $row_acomptes_utilises->total_acomptes_utilises;__N__    }__N____N__    // Calculer les avoirs utilisés__N__    $query_avoirs_utilises = \"SELECT SUM(amount_ttc) AS total_avoirs_utilises__N__                              FROM \" . MAIN_DB_PREFIX . \"societe_remise_except__N__                       WHERE fk_facture IS NOT NULL AND fk_facture_source IN (__N__                         SELECT rowid FROM \" . MAIN_DB_PREFIX . \"facture__N__                         WHERE fk_soc = \" . intval($societe_id) . \" AND type = 2__N__                     )\";__N__    $result_avoirs_utilises = $db->query($query_avoirs_utilises);__N__    $total_avoirs_utilises = 0;__N____N__    if ($result_avoirs_utilises && $db->num_rows($result_avoirs_utilises) > 0) {__N__        $row_avoirs_utilises = $db->fetch_object($result_avoirs_utilises);__N__        $total_avoirs_utilises = $row_avoirs_utilises->total_avoirs_utilises;__N__    }__N__}__N__?>__N____N____N____N____N__<?php includeContainer(\'header\'); ?>__N____N__<?php includeContainer(\'aside_bar\'); ?>__N____N__<div class=\"grid-right-side\">__N__    __N__    <div class=\"profil-conteneur\">__N__        <div class=\"left-side-profil\">__N__                                  __N__            <img src=\"<?php echo $logo_path; ?>\" alt=\"Photo de Profil\" class=\"profil-photo\">__N____N__            <h1 class=\"profile-name\"><?php echo htmlspecialchars($societe_nom); ?>!</h1>__N__            <div class=\"line\"></div>__N__            <p><b>Email</b><?php echo htmlspecialchars($societe_email); ?></p>__N__            <p><b>Phone</b><?php echo htmlspecialchars($societe_phone); ?></p>__N__    __N__            <p><b>Adresse </b><?php echo htmlspecialchars($societe_address) . \' , \' . htmlspecialchars($societe_zip) . \' - Tunisie - \' .  htmlspecialchars($societe_town); ?></p>__N____N__        </div>__N__        __N__        <div class=\"right-side-profil\">__N__          __N__            <div class=\"total-card\">__N__                <div class=\"total-card-title\">__N__                    <h5>Mes devis</h3>__N__                </div>__N__                <div class=\"total-card-price\">__N__                    <p><b>Total TTC</b><?php echo number_format($total_ttc_sum_propal, 3, \',\', \' \'); ?> TND</p>__N__                    <p class=\"light-ht\"><b>Total HT</b><?php echo number_format($total_ht_sum_propal, 3, \',\', \' \'); ?> TND</p>__N____N__                    <div class=\"detail-container\">__N__                        <div class=\"line\"></div>__N__                        <a href=\"proposition_Commerciale.php\" class=\"more-details\">Plus de détails</a>__N__                    </div>__N__                </div>__N__            </div>__N__            __N__            <div class=\"total-card\">__N__                <div class=\"total-card-title\">__N__                    <h5>Mes commandes</h3>__N__                </div>__N__                <div class=\"total-card-price\">__N__                <p><b>Total TTC</b><?php echo number_format($total_ttc_sum_commandes, 3, \',\', \' \'); ?> TND</p>__N__                    <p class=\"light-ht\"><b>Total HT</b><?php echo number_format($total_ht_sum_commandes, 3, \',\', \' \'); ?> TND</p>__N__                    <div class=\"detail-container\">__N__                        <div class=\"line\"></div>__N__                        <a href=\"commandes.php\" class=\"more-details\">Plus de détails</a>__N__                    </div>__N__                </div>__N__            </div>__N__            __N__            <!--<div style=\"width: 100%;display: flex; justify-content: center;\">-->__N__                __N__            <div class=\"total-card\">__N__                <div class=\"total-card-title\">__N__                    <h5>Mes factures</h3>__N__                </div>__N__                <div class=\"total-card-price\">__N__                    <p><b>Total TTC</b><?php echo number_format($total_ttc_sum_factures, 3, \',\', \' \'); ?> TND</p>__N__                    <p class=\"light-ht\"><b>Total HT</b><?php echo number_format($total_ht_sum_factures, 3, \',\', \' \'); ?> TND</p>__N____N__                    <div class=\"detail-container\">__N__                        <div class=\"line\"></div>__N__                        <a href=\"facture.php\" class=\"more-details\">Plus de détails</a>__N__                    </div>__N__                </div>__N__            </div>__N__            __N__            <!--</div>-->__N__            __N__            __N__            __N__            __N__             <div class=\"total-card\">__N__                <div class=\"total-card-title\">__N__                    <h5>Mes avoirs</h3>__N__                </div>__N__                <div class=\"total-card-price\">__N__                       <p><b>Total TTC</b><?php echo number_format($total_avoirs, 3, \',\', \' \'); ?> TND</p>__N____N__                    <div class=\"detail-container\">__N__                        <div class=\"line\"></div>__N__                        <a href=\"avoir.php\" class=\"more-details\">Plus de détails</a>__N__                    </div>__N__                </div>__N__            </div>__N__            __N__             __N__            __N__            <div class=\"total-card\">__N__                <div class=\"total-card-title\">__N__                    <h5>Mes acomptes</h3>__N__                </div>__N__                <div class=\"total-card-price\">__N__                     <p><b>Total TTC</b><?php echo number_format($total_acomptes, 3, \',\', \' \'); ?> TND</p>__N____N__                    <div class=\"detail-container\">__N__                        <div class=\"line\"></div>__N__                        <a href=\"acompte.php\" class=\"more-details\">Plus de détails</a>__N__                    </div>__N__                </div>__N__            </div>__N__            __N__            __N__            <!--<div class=\"total-card\">-->__N__            <!--    <div class=\"total-card-title\">-->__N__            <!--        <h5>Mes tickets</h3>-->__N__            <!--    </div>-->__N__            <!--    <div class=\"total-card-price\">-->__N__            <!--        <p><b>Total  </b><?php echo number_format($total_count_ticket); ?></p>-->__N__            <!--        <div class=\"detail-container\">-->__N__            <!--            <div class=\"line\"></div>-->__N__            <!--            <a href=\"ticket.php\" class=\"more-details\">Plus de détails</a>-->__N__            <!--        </div>-->__N__            <!--    </div>-->__N__            <!--</div>-->__N__            __N__            __N__        __N__            __N__            __N__          __N__        </div>__N__    </div>__N__    __N__    __N__<!--    <div class=\"profile-container\">-->__N__<!--        <div class=\"profile-left\">-->__N__<!--            <img src=\"image/Zai.tn/header/mahmoud.jpeg\" alt=\"Photo de Profil\" class=\"profile-photo\">-->__N__                            __N__<!--            <h1 class=\"profile-name\"><?php echo htmlspecialchars($societe_nom); ?>!</h1>-->__N__<!--            <p class=\"profile-info\">Email : utilisateur@example.com</p>-->__N__<!--            <p class=\"profile-info\">Téléphone : +33 1 23 45 67 89</p>-->__N__<!--            <p class=\"profile-info\">Adresse : 123 Rue Exemple, Paris, France</p>-->__N__<!--            <p class=\"profile-info\">Fonction : Profession</p>-->__N__<!--        </div>-->__N__<!--        <div class=\"profile-right\">-->__N__<!--            <div class=\"card\">-->__N__<!--                <h2>Total des Commandes</h2>-->__N__<!--<p>Total HT: <?php echo number_format($total_ht_sum_commandes, 2, \',\', \' \'); ?> TND</p>-->__N__<!--                        <li><a href=\"Commandes.php\"><button class=\"btn\">Plus</button></a></li>            </div>-->__N__<!--            <div class=\"card\">-->__N__<!--                <h2>Total des Factures</h2>-->__N__<!--<p>Total HT: <?php echo number_format($total_ht_sum_factures, 2, \',\', \' \'); ?> TND</p>-->__N__<!--                        <li><a href=\"Facture.php\"><button class=\"btn\">Plus</button></a></li>            </div>-->__N__<!--            <div class=\"card\">-->__N__<!--                <h2>Total des Propositions</h2>-->__N__<!--<p>Total HT: <?php echo number_format($total_ht_sum_propal, 2, \',\', \' \'); ?> TND</p>-->__N__<!--                        <li><a href=\"Proposition_Commerciale.php\"><button class=\"btn\">Plus</button></a></li>            </div>-->__N__<!--             <div class=\"card\">-->__N__<!--                <h2>Total des tickets</h2>-->__N__<!--<p>Total des tickets est :  </p>-->__N__<!--                        <li><a href=\"Ticket.php\"><button class=\"btn\">Plus</button></a></li>            </div>-->__N__<!--        </div>-->__N__<!--    </div>-->__N__</div>__N____N____N__</div>__N____N____N__<style>__N__    .container-profil-grid {__N__        position: relative;__N__        display: grid;__N__        grid-template-columns: 14vw 86vw;__N__        min-height: 92vh;__N__    }__N__    __N__    .grid-right-side {__N__        position: relative;__N__        display: flex;__N__        align-items: center;__N__        justify-content: center;__N__        width:100%;__N__        height: 100%;__N__        background: var(--color-second);__N__        padding: 7vh 0;__N__    }__N__    __N__    .profil-conteneur {__N__        position: relative;__N__        width: 85%;__N__        display: flex;__N__        height: auto;__N__        background: #ffffff;__N__        border-radius: 32px;__N__        box-shadow: 0 4px 6px rgb(0 0 0 / 20%);__N__        border: solid 2px var(--color-first);__N__        overflow: hidden;__N__    }__N__    __N__    .left-side-profil {__N__        position: relative;__N__        /*width: 50%;*/__N__        background: var(--color-first);__N__        display: flex;__N__        flex-direction: column;__N__        align-items: center;__N__        justify-content: center;__N__        gap: 4px;__N__        padding: 50px;__N__    }__N__    __N__    .right-side-profil {__N__        position: relative;__N__        /*width: 60%;*/__N__        height: 100%;__N__        display: flex;__N__        align-items: center;__N__        justify-content: center;__N__        flex-wrap: wrap;__N__        gap: 30px;__N__        padding: 45px 20px;__N__    }__N__    __N__    .left-side-profil .profil-photo {__N__        width: 240px;__N__        height: 240px;__N__        border-radius: 50%;__N__        border: solid 3px #ffffff;__N__    }__N__    __N__    .left-side-profil h1{__N__        font-family: \"JetBrains Mono\", monospace;__N__        font-size: 58px;__N__        color: var(--color-second);__N__        text-transform: capitalize;__N__        letter-spacing:2px;__N__        text-align: center;__N__    }__N__    __N__    __N__    .left-side-profil .line {__N__        width: 35%;__N__        height: 1px;__N__        margin: 0 0 30px 0;__N__        background: white;__N__    }__N__    __N__    .left-side-profil b {__N__        color: var(--color-second);__N__        margin-right: 5px;__N__    }__N__    __N__    .left-side-profil p {__N__        color: #9f9f9f;__N__        font-family: \"Roboto\", sans-serif;__N__        letter-spacing: 1px;__N__        font-size: 22px;__N__        text-align: center;__N__    }__N__    __N__    __N__    __N__    __N__    __N__    __N__    .total-card {__N__        position: relative;__N__        width: 360px;__N__        display: flex;__N__        flex-direction: column;__N__        border: solid 2px var(--color-first);__N__        border-radius: 24px;__N__        box-shadow: 0 4px 6px rgb(0 0 0 / 16%);__N__        overflow:hidden;__N__        display: flex;__N__        flex-direction: column;__N__        transition: .3s;__N__        will-change: transform;__N__    }__N__    __N__    .total-card:hover {__N__           transform: scale(102%);__N__    }__N__    .total-card:hover .total-card-title {__N__        background: #4e82cf;__N__    }__N__    __N__    __N__    __N__    .total-card-title {__N__        position: relative;__N__        background: var(--color-first);__N__        padding: 8px 16px;__N__        transition: .3s;__N__    }__N__    __N__    .total-card h5 {__N__        text-align: center;__N__        color : #ddeaff;__N__    }__N__    __N__    .total-card-price {__N__        position: relative;__N__        width: 100%;__N__        height: 100%;__N__        padding: 18px;__N__    }__N__    __N__    .total-card-price p {__N__        font-family: \"Roboto\", sans-serif;__N__        font-size: 26px;__N__        color: var(--color-third);__N__        font-weight: 500;__N__        margin-bottom: 1.1vh;__N__    }__N__    __N__    .total-card-price b {__N__        margin-right: 14px;__N__        font-weight: 500;__N__        color: var(--color-first);__N__    }__N__    __N__    .total-card-price .line {__N__        position: relative;__N__        height: 1px;__N__        width: 35%;__N__        background: var(--color-first);__N__        right: -18px;__N__    }__N__    __N__    .detail-container {__N__        display: flex;__N__        flex-direction: column;__N__        align-items: flex-end;__N__        gap: 10px;__N__    }__N__    __N__    .more-details {__N__        font-size: 20px !important;__N__        color: var(--color-first) !important;__N__        transition: .3s;__N__    }__N__    __N__    .more-details:hover {__N__        color: black;__N__        letter-spacing: 1px;__N__    }__N__    __N__    .light-ht {__N__        font-weight: 300 !important;__N__        font-size: 22px !important;__N__        margin-bottom: 1.4vh !important;__N__    }__N__    .light-ht b{__N__        font-weight: 400 !important;__N__    }__N__    __N____N__</style>', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 91 -> 24__+MAX_llx_website_page__ - Aliases proposition_commerciale --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(24__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'proposition_commerciale', '', 'proposition_commerciale', 'proposition_commerciale', '', '', '', '1', '2024-07-08 13:19:57', '2024-08-07 18:21:47', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Initialisation des variables de recherche__N__    $ref = isset($_GET[\'ref\']) ? $_GET[\'ref\'] : \'\';__N__    $filter_statut = isset($_GET[\'filter-statut\']) ? $_GET[\'filter-statut\'] : \'\'; // Filtre statut__N____N__    // Requête SQL pour obtenir la somme totale des total_ht des propositions de la société connectée__N__    $query_total_ht = \"SELECT SUM(total_ht) AS total_ht_sum FROM \" . MAIN_DB_PREFIX . \"propal WHERE fk_soc = \" . intval($societe_id);__N__    $result_total_ht = $db->query($query_total_ht);__N__    $total_ht_sum = 0;__N____N__    if ($result_total_ht) {__N__        $row_total_ht = $db->fetch_object($result_total_ht);__N__        if ($row_total_ht) {__N__            $total_ht_sum = $row_total_ht->total_ht_sum;__N__        }__N__    }__N____N__    // Requête SQL initiale pour récupérer les propals__N__    $sql = \"SELECT rowid AS propal_id, ref, datec, total_ht, total_ttc, total_tva, note_public, fin_validite, fk_statut __N__            FROM \" . MAIN_DB_PREFIX . \"propal __N__            WHERE fk_soc = \" . intval($societe_id) . \" AND fk_statut != 0 \";__N____N__    // Ajouter le critère de recherche par référence seulement si elle est définie__N__    if (!empty($ref)) {__N__        $sql .= \" AND ref LIKE \'%\" . $db->escape($ref) . \"%\'\";__N__    }__N____N__    // Ajout des conditions de filtre de statut__N__    if (!empty($filter_statut)) {__N__        if ($filter_statut == \'1\') {__N__            $sql .= \" AND fk_statut = 1\";__N__        } elseif ($filter_statut == \'2\') {__N__            $sql .= \" AND fk_statut = 2\";__N__        } elseif ($filter_statut == \'3\') {__N__            $sql .= \" AND fk_statut = 3\";__N__        }__N__    }__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N____N__    // Vérifier si la requête SQL a retourné des résultats__N__    if (!$result) {__N__        echo \"Erreur dans la requête SQL: \" . $db->lasterror();__N__    }__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N__$link_to_page = dol_buildpath(\'detailspropale.php\', 1);__N__$link_to_page_filter = dol_buildpath(\'proposition_commerciale.php\', 1);__N__?>__N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__            <div class=\"table-container\">__N__                <table class=\"oorder-table\">__N__                    <thead>__N__                        <tr>__N__                            <th>N° DE PROPOSITION</th>__N__                            <th>Date</th>__N__                            <th>Date de validité</th>__N__                            <th>Montant_HT </th>__N__                            <th>Montant_tva </th>__N__                            <th>Montant_TTC </th>__N__                            <th>Note (public) </th>__N__                            __N__                            <style>__N__                                .filter-statut {__N__                                    position: absolute;__N__                                    top: 0;__N__                                    width: 100%;__N__                                    height: 80%;__N__                                    left: 10px;__N__                                    font-size: 14px;__N__                                }__N__                                __N__                                #filter-statut {__N__                                    opacity: 0;__N__                                    height: 100%;__N__                                    width: 100%;__N__                                    padding: 10px;__N__                                    cursor: pointer;__N__                                }__N__                                __N__                                .box-filter {__N__                                    display: flex;__N__                                    justify-content: center;__N__                                    align-items: center;__N__                                }__N__                                __N__                            </style>__N__                            __N__                            <th style=\"position: relative;\">__N__                                <div class=\"filter-statut\">__N__                                    <form action=\"<?php echo htmlspecialchars($link_to_page_filter); ?>\" method=\"get\">__N__                                        <input type=\"hidden\" name=\"website\" value=\"ebusinessTester1\">__N__                                        <input type=\"hidden\" name=\"pageref\" value=\"proposition_commerciale\">__N__                                        <label></label>__N__                                        <select name=\"filter-statut\" id=\"filter-statut\" onchange=\"this.form.submit()\">__N__                                            <option value=\"\" <?php if ($filter_statut == \'\') echo \'selected\'; ?>>Tout</option>__N__                                            <option value=\"1\" <?php if ($filter_statut == \'1\') echo \'selected\'; ?>>Ouvert</option>__N__                                            <option value=\"2\" <?php if ($filter_statut == \'2\') echo \'selected\'; ?>>Signée</option>__N__                                            <option value=\"3\" <?php if ($filter_statut == \'3\') echo \'selected\'; ?>>Non-Signée</option>__N__                                        </select>__N__                                    </form>__N__                                </div>__N__                                <span class=\"box-filter\">__N__                                    STATUT<i class=\'bx bx-filter\' style=\"margin-left: 4px;\"></i>__N__                                </span>__N__                            </th>__N__                            __N__                            <th>Action</th>__N__                        </tr>__N__                    </thead>__N__                    <tbody>__N__                        <?php__N__                        // Initialisation des totaux__N__                        $total_ht_sum = 0;__N__                        $total_tva_sum = 0;__N__                        $total_ttc_sum = 0;__N____N__                        if ($result) {__N__                            while ($row = $db->fetch_object($result)) {__N__                                echo \"<tr>\";    __N__                                echo \"<td>{$row->ref}</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                                echo \"<td>\" . date(\"d/m/Y\", strtotime($row->fin_validite)) . \"</td>\";__N__                                echo \"<td>\" . number_format($row->total_ht, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_tva, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>\" . number_format($row->total_ttc, 3, \',\', \' \') . \" TND</td>\";__N__                                echo \"<td>{$row->note_public}</td>\";__N____N__                                // Ajouter les valeurs aux totaux__N__                                $total_ht_sum += $row->total_ht;__N__                                $total_tva_sum += $row->total_tva;__N__                                $total_ttc_sum += $row->total_ttc;__N____N__                                // Affichage du statut en fonction de la valeur de fk_statut__N__                                if ($row->fk_statut == 1) {__N__                                    echo \"<td>Ouvert</td>\";__N__                                } elseif ($row->fk_statut == 2) {__N__                                    echo \"<td>Signée</td>\";__N__                                } elseif ($row->fk_statut == 3) {__N__                                    echo \"<td>Non-Signée</td>\";__N__                                } else {__N__                                    echo \"<td>Autre</td>\"; // Gérer les autres cas si nécessaire__N__                                }__N____N__                                echo \"<td><a href=\\\"\" . htmlspecialchars($link_to_page . \'?propal_id=\' . $row->propal_id) . \"\\\" class=\\\"aaction-btn\\\">Imprimer</a></td>\";__N__                                echo \"</tr>\";__N__                            }__N__                            $db->free($result);__N__                        } else {__N__                            echo \"<tr><td colspan=\'9\'>Aucune Proposition trouvée</td>\"; // Modifié pour correspondre au nombre de colonnes__N__                        }__N__                        ?>__N__                    </tbody>__N__                    <tfoot>__N__                        <tr>__N__                            <td colspan=\"3\"><strong>Total</strong></td>__N__                            <td><strong><?php echo number_format($total_ht_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td><strong><?php echo number_format($total_tva_sum, 3, \',\', \' \'); ?></strong></td>__N__                            <td><strong><?php echo number_format($total_ttc_sum, 3, \',\', \' \') . \" TND\"; ?></strong></td>__N__                            <td colspan=\"4\"></td>__N__                        </tr>__N__                    </tfoot>__N__                </table>__N__            </div>__N__        </div>__N__    </main>__N__</section>__N__', '', 0);
-- File generated by Dolibarr 19.0.2 -- 2024-08-14 08:42:13 UTC --;
-- Page ID 92 -> 25__+MAX_llx_website_page__ - Aliases ticket --;
INSERT INTO llx_website_page(rowid, fk_page, fk_website, pageurl, aliasalt, title, description, lang, image, keywords, status, date_creation, tms, import_key, grabbed_from, type_container, htmlheader, content, author_alias, allowed_in_frames) VALUES(25__+MAX_llx_website_page__, null, __WEBSITE_ID__, 'ticket', '', 'ticket', '', '', '', '', '1', '2024-07-19 13:01:31', '2024-08-05 16:32:31', null, '', 'page', '', '<?php__N__// Résoudre le chemin absolu vers main.inc.php__N__$main_inc_path = $_SERVER[\'DOCUMENT_ROOT\'] . \'/main.inc.php\';__N____N__// Inclure le fichier de Dolibarr__N__require_once $main_inc_path;__N____N__session_start();__N__if (!isset($_SESSION[\'valid\'])) {__N__    include \'login.php\';__N__    exit;__N__}__N____N__// Connexion à la base de données Dolibarr__N__global $db;__N____N__if ($db) {__N__    // Récupérer l\'ID de la société connectée__N__    $societe_id = $_SESSION[\'id\'];__N____N__    // Construction de la requête SQL pour les tickets de la société__N__    $sql = \"SELECT ref, subject, message, datec FROM \" . MAIN_DB_PREFIX . \"ticket__N__            WHERE fk_soc = \" . intval($societe_id);__N____N__    // Exécuter la requête SQL__N__    $result = $db->query($sql);__N__} else {__N__    echo \"Erreur de connexion à la base de données\";__N__    exit;__N__}__N__?>__N__<?php includeContainer(\'header\'); ?>__N__<?php includeContainer(\'aside_bar\'); ?>__N____N__<section id=\"mysection1\" contenteditable=\"true\">__N__    <main>__N__        <div class=\"ccontainer\">__N__          <div class=\"table-container\">__N__            <table class=\"oorder-table\">__N__                <thead>__N__                    <tr>__N__                        <th>N° DE Ticket</th>__N__                        <th>Subject</th>__N__                        <th>Date de création</th>__N__                        <th>Message</th>__N__                    </tr>__N__                </thead>__N__                <tbody>__N__                    <?php__N__                    if ($result) {__N__                        while ($row = $db->fetch_object($result)) {__N__                            echo \"<tr>\";__N__                            echo \"<td>{$row->ref}</td>\";__N__                            echo \"<td>{$row->subject}</td>\";__N__                            echo \"<td>\" . date(\"d/m/Y\", strtotime($row->datec)) . \"</td>\";__N__                            echo \"<td>{$row->message}</td>\";__N__                            echo \"</tr>\";__N__                        }__N__                        $db->free($result);__N__                    } else {__N__                        echo \"<tr><td colspan=\'4\'>Aucun ticket trouvé</td></tr>\";__N__                    }__N__                    ?>__N__                </tbody>__N__            </table>__N__        </div>    __N__        __N__        __N__        <div class=\"ticket-blank\">__N__            __N__            <a href=\"https://demo.cieloo.io/custom/ticketplus/index.php?v=tickets\" target=\"blank\"><b>Accédez au Centre de Support </b></a>__N__            <a href=\"\"><p>Ouvrez un Ticket pour une Prise en Charge Rapide par Nos Équipes</p></a>__N__            __N__        </div>__N__        __N__        __N__        </div>__N__    </main>__N__</section>__N____N__        <style>__N__        __N__            .ticket-blank {__N__                display: flex;__N__                margin: 6vh 0;__N__                width: 100%;__N__                justify-content: center;__N__                align-items: center;__N__                flex-direction: column;__N__            }__N__            __N__            .ticket-blank a {__N__                font-size: 22px !important;__N__                color: var(--color-first);__N__            }__N__            __N__            .ticket-blank a:hover {__N__                color: #2668c7 !important;__N__            }__N__            __N__            .ticket-blank a b {__N__                transition: .2s;__N__            }__N__            __N__            .ticket-blank a:hover b {__N__                color: #4a75b3 !important;__N__            }__N__            __N__            __N__            __N__        </style>__N__', '', 0);

-- For Dolibarr v14+ --;
UPDATE llx_website SET lang = 'en' WHERE rowid = __WEBSITE_ID__;
UPDATE llx_website SET otherlang = '' WHERE rowid = __WEBSITE_ID__;

